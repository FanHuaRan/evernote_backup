<html>
<head>
  <title>HTML 5 应用程序缓存</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="523"/>
<h1>HTML 5 应用程序缓存</h1>

<div>
<span><div><h1 style="margin: 0px 0px 0px 25px; padding: 0px; border: 0px; font-size: 28px; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 252, 248);"><br/></h1></div><div><br/></div><div style="margin: 0px 0px 0px 25px; padding: 30px 0px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170); width: 810px; color: rgb(0, 0, 0); font-family: PingFangSC-Regular, Verdana, Arial, 微软雅黑, 宋体; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 252, 248);"><div style="margin: 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px; font-weight: bold; font-family: 微软雅黑; font-size: 18px; color: rgb(63, 63, 63);">使用 HTML5，通过创建 cache manifest 文件，可以轻松地创建 web 应用的离线版本。</span></div></div><div style="margin: 0px 0px 0px 25px; padding: 30px 0px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170); width: 810px; color: rgb(0, 0, 0); font-family: PingFangSC-Regular, Verdana, Arial, 微软雅黑, 宋体; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 252, 248);"><h2 style="margin: 0px; padding: 0px; border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;"><span style="border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;">什么是应用程序缓存（Application Cache）？</span></h2><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">HTML5 引入了应用程序缓存，这意味着 web 应用可进行缓存，并可在没有因特网连接时进行访问。</span></div><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">应用程序缓存为应用带来三个优势：</span></div><ul style="margin: 10px 0px 0px 35px; padding: 0px; border: 0px;"><li style="margin: 3px 0px 0px; padding: 0px; border: 0px;">离线浏览 - 用户可在应用离线时使用它们</li><li style="margin: 3px 0px 0px; padding: 0px; border: 0px;">速度 - 已缓存资源加载得更快</li><li style="margin: 3px 0px 0px; padding: 0px; border: 0px;">减少服务器负载 - 浏览器将只从服务器下载更新过或更改过的资源。</li></ul></div><div style="margin: 0px 0px 0px 25px; padding: 30px 0px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170); width: 810px; color: rgb(0, 0, 0); font-family: PingFangSC-Regular, Verdana, Arial, 微软雅黑, 宋体; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 252, 248);"><h2 style="margin: 0px; padding: 0px; border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;"><span style="border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;">浏览器支持</span></h2><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">所有主流浏览器均支持应用程序缓存，除了 Internet Explorer。</span></div></div><div style="margin: 0px 0px 0px 25px; padding: 30px 0px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170); width: 810px; color: rgb(0, 0, 0); font-family: PingFangSC-Regular, Verdana, Arial, 微软雅黑, 宋体; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 252, 248);"><h2 style="margin: 0px; padding: 0px; border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;"><span style="border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;">HTML5 Cache Manifest 实例</span></h2><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">下面的例子展示了带有 cache manifest 的 HTML 文档（供离线浏览）：</span></div><h3 style="margin: 25px 0px 0px; padding: 0px; border: 0px; font-weight: bold; font-size: 16px;"><span style="border: 0px; font-weight: bold; font-size: 16px;">实例</span></h3><div style="margin: 15px 0px 0px; padding: 20px; border: 1px dotted rgb(119, 136, 85); font-family: Consolas; width: 765px; background: rgb(245, 245, 245); line-height: 1.4;"><div>&lt;!DOCTYPE HTML&gt;</div><div>&lt;html <span style="border: 0px; font-family: Consolas, &quot;Courier New&quot;, Courier, monospace; color: rgb(0, 0, 221);">manifest=&quot;demo.appcache&quot;</span>&gt;</div><div><br/></div><div>&lt;body&gt;</div><div>The content of the document......</div><div>&lt;/body&gt;</div><div><br/></div><div>&lt;/html&gt;</div></div><div><a href="http://www.w3school.com.cn/tiy/t.asp?f=html5_html_manifest" style="border: 0px; line-height: 21px; outline: 0px; vertical-align: middle; overflow: hidden; color: rgb(255, 255, 255); background-color: rgb(233, 104, 107); cursor: pointer; white-space: nowrap; box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 6px, rgba(0, 0, 0, 0.24) 0px 1px 2px; font-family: 微软雅黑; border-radius: 2px; background: transparent;">亲自试一试</a></div></div><div style="margin: 0px 0px 0px 25px; padding: 30px 0px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170); width: 810px; color: rgb(0, 0, 0); font-family: PingFangSC-Regular, Verdana, Arial, 微软雅黑, 宋体; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 252, 248);"><h2 style="margin: 0px; padding: 0px; border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;"><span style="border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;">Cache Manifest 基础</span></h2><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">如需启用应用程序缓存，请在文档的 &lt;html&gt; 标签中包含 manifest 属性：</span></div><div style="margin: 15px 0px 0px; padding: 20px; border: 1px dotted rgb(119, 136, 85); font-family: Consolas; width: 765px; background: rgb(245, 245, 245); line-height: 1.4;"><div>&lt;!DOCTYPE HTML&gt;</div><div>&lt;html manifest=&quot;demo.appcache&quot;&gt;</div><div>...</div><div>&lt;/html&gt;</div></div><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">每个指定了 manifest 的页面在用户对其访问时都会被缓存。如果未指定 manifest 属性，则页面不会被缓存（除非在 manifest 文件中直接指定了该页面）。</span></div><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">manifest 文件的建议的文件扩展名是：&quot;.appcache&quot;。</span></div><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">请注意，manifest 文件需要配置</span><span style="border: 0px; line-height: 21px; font-style: italic; font-weight: bold;">正确的 MIME-type</span><span style="border: 0px; line-height: 21px;">，即 &quot;text/cache-manifest&quot;。必须在 web 服务器上进行配置。</span></div></div><div style="margin: 0px 0px 0px 25px; padding: 30px 0px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170); width: 810px; color: rgb(0, 0, 0); font-family: PingFangSC-Regular, Verdana, Arial, 微软雅黑, 宋体; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 252, 248);"><h2 style="margin: 0px; padding: 0px; border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;"><span style="border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;">Manifest 文件</span></h2><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">manifest 文件是简单的文本文件，它告知浏览器被缓存的内容（以及不缓存的内容）。</span></div><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">manifest 文件可分为三个部分：</span></div><ul style="margin: 10px 0px 0px 35px; padding: 0px; border: 0px;"><li style="margin: 3px 0px 0px; padding: 0px; border: 0px;"><span style="font-style: italic; border: 0px; font-weight: bold;">CACHE MANIFEST</span> - 在此标题下列出的文件将在首次下载后进行缓存</li><li style="margin: 3px 0px 0px; padding: 0px; border: 0px;"><span style="font-style: italic; border: 0px; font-weight: bold;">NETWORK</span> - 在此标题下列出的文件需要与服务器的连接，且不会被缓存</li><li style="margin: 3px 0px 0px; padding: 0px; border: 0px;"><span style="font-style: italic; border: 0px; font-weight: bold;">FALLBACK</span> - 在此标题下列出的文件规定当页面无法访问时的回退页面（比如 404 页面）</li></ul><h3 style="margin: 25px 0px 0px; padding: 0px; border: 0px; font-weight: bold; font-size: 16px;"><span style="border: 0px; font-weight: bold; font-size: 16px;">CACHE MANIFEST</span></h3><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">第一行，CACHE MANIFEST，是必需的：</span></div><div style="margin: 15px 0px 0px; padding: 20px; border: 1px dotted rgb(119, 136, 85); font-family: Consolas; width: 765px; background: rgb(245, 245, 245); line-height: 1.4;"><div>CACHE MANIFEST</div><div>/theme.css</div><div>/logo.gif</div><div>/main.js</div></div><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">上面的 manifest 文件列出了三个资源：一个 CSS 文件，一个 GIF 图像，以及一个 JavaScript 文件。当 manifest 文件加载后，浏览器会从网站的根目录下载这三个文件。然后，无论用户何时与因特网断开连接，这些资源依然是可用的。</span></div><h3 style="margin: 25px 0px 0px; padding: 0px; border: 0px; font-weight: bold; font-size: 16px;"><span style="border: 0px; font-weight: bold; font-size: 16px;">NETWORK</span></h3><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">下面的 NETWORK 小节规定文件 &quot;login.asp&quot; 永远不会被缓存，且离线时是不可用的：</span></div><div style="margin: 15px 0px 0px; padding: 20px; border: 1px dotted rgb(119, 136, 85); font-family: Consolas; width: 765px; background: rgb(245, 245, 245); line-height: 1.4;"><div>NETWORK:</div><div>login.asp</div></div><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">可以使用星号来指示所有其他资源/文件都需要因特网连接：</span></div><div style="margin: 15px 0px 0px; padding: 20px; border: 1px dotted rgb(119, 136, 85); font-family: Consolas; width: 765px; background: rgb(245, 245, 245); line-height: 1.4;"><div>NETWORK:</div><div>*</div></div><h3 style="margin: 25px 0px 0px; padding: 0px; border: 0px; font-weight: bold; font-size: 16px;"><span style="border: 0px; font-weight: bold; font-size: 16px;">FALLBACK</span></h3><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">下面的 FALLBACK 小节规定如果无法建立因特网连接，则用 &quot;offline.html&quot; 替代 /html5/ 目录中的所有文件：</span></div><div style="margin: 15px 0px 0px; padding: 20px; border: 1px dotted rgb(119, 136, 85); font-family: Consolas; width: 765px; background: rgb(245, 245, 245); line-height: 1.4;"><div>FALLBACK:</div><div>/html5/ /404.html</div></div><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px; font-weight: bold;">注释：</span><span style="border: 0px; line-height: 21px;">第一个 URI 是资源，第二个是替补。</span></div></div><div style="margin: 0px 0px 0px 25px; padding: 30px 0px; border-width: 0px 0px 1px; border-bottom-style: solid; border-bottom-color: rgb(170, 170, 170); width: 810px; color: rgb(0, 0, 0); font-family: PingFangSC-Regular, Verdana, Arial, 微软雅黑, 宋体; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(253, 252, 248);"><h2 style="margin: 0px; padding: 0px; border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;"><span style="border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;">更新缓存</span></h2><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">一旦应用被缓存，它就会保持缓存直到发生下列情况：</span></div><ul style="margin: 10px 0px 0px 35px; padding: 0px; border: 0px;"><li style="margin: 3px 0px 0px; padding: 0px; border: 0px;">用户清空浏览器缓存</li><li style="margin: 3px 0px 0px; padding: 0px; border: 0px;">manifest 文件被修改（参阅下面的提示）</li><li style="margin: 3px 0px 0px; padding: 0px; border: 0px;">由程序来更新应用缓存</li></ul><h3 style="margin: 25px 0px 0px; padding: 0px; border: 0px; font-weight: bold; font-size: 16px;"><span style="border: 0px; font-weight: bold; font-size: 16px;">实例 - 完整的 Manifest 文件</span></h3><div style="margin: 15px 0px 0px; padding: 20px; border: 1px dotted rgb(119, 136, 85); font-family: Consolas; width: 765px; background: rgb(245, 245, 245); line-height: 1.4;"><div>CACHE MANIFEST</div><div># 2012-02-21 v1.0.0</div><div>/theme.css</div><div>/logo.gif</div><div>/main.js</div><div><br/></div><div>NETWORK:</div><div>login.asp</div><div><br/></div><div>FALLBACK:</div><div>/html5/ /404.html</div></div><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px; font-weight: bold; color: rgb(255, 153, 85);">重要的提示：</span><span style="border: 0px; line-height: 21px;">以 &quot;#&quot; 开头的是注释行，但也可满足其他用途。应用的缓存会在其 manifest 文件更改时被更新。如果您编辑了一幅图片，或者修改了一个 JavaScript 函数，这些改变都不会被重新缓存。更新注释行中的日期和版本号是一种使浏览器重新缓存文件的办法。</span></div></div><div><h2 style="margin: 0px; padding: 0px; border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;"><span style="border: 0px; font-weight: bold; font-size: 18px; color: rgb(63, 63, 63); font-family: 微软雅黑;">关于应用程序缓存的注释</span></h2><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">请留心缓存的内容。</span></div><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px;">一旦文件被缓存，则浏览器会继续展示已缓存的版本，即使您修改了服务器上的文件。为了确保浏览器更新缓存，您需要更新 manifest 文件。</span></div><div style="margin: 12px 0px 0px; padding: 0px; border: 0px; line-height: 21px;"><span style="border: 0px; line-height: 21px; font-weight: bold;">注释：</span><span style="border: 0px; line-height: 21px;">浏览器对缓存数据的容量限制可能不太一样（某些浏览器设置的限制是每个站点 5MB）。</span></div></div><div><br/></div></span>
</div></body></html> 