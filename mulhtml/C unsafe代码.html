<html>
<head>
  <title>C# unsafe代码</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1285"/>
<h1>C# unsafe代码</h1>

<div>
<span><div><div style="margin-top: 1rem; margin-bottom: 0px; color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important; padding-right: 25px !important;"><span style="color: rgb(0, 0, 0); font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 0.8rem; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); position: relative !important; border-radius: 2px; border: 1px solid rgb(211, 214, 219); line-height: 19px; -webkit-font-smoothing: auto; direction: ltr;">unsafe</span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">关键字表示不安全上下文，该上下文是任何涉及指针的操作所必需的。</span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">有关详细信息，请参阅</span><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/unsafe-code-pointers/index" style="color: rgb(0, 120, 215); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important; cursor: pointer; word-wrap: break-word; text-decoration: underline;">不安全代码和指针</a><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">。</span></div><div style="margin-top: 1rem; margin-bottom: 0px; color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important; padding-right: 25px !important;"><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">可在类型或成员的声明中使用</span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><span style="color: rgb(0, 0, 0); font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 0.8rem; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); position: relative !important; border-radius: 2px; border: 1px solid rgb(211, 214, 219); line-height: 19px; -webkit-font-smoothing: auto; direction: ltr;">unsafe</span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">修饰符。</span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">因此，类型或成员的整个正文范围均被视为不安全上下文。</span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">以下面使用</span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><span style="color: rgb(0, 0, 0); font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 0.8rem; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(249, 249, 249); position: relative !important; border-radius: 2px; border: 1px solid rgb(211, 214, 219); line-height: 19px; -webkit-font-smoothing: auto; direction: ltr;">unsafe</span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">修饰符声明的方法为例：</span></div><div style="background-color: rgb(245, 245, 245); color: rgb(112, 112, 112); -webkit-box-orient: horizontal; -webkit-box-direction: normal; flex-direction: row; font-size: 0.8rem; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(224, 224, 224); border-right-color: rgb(224, 224, 224); border-left-color: rgb(224, 224, 224); margin-top: 16px; min-height: 30px; font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"></div><div style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 0.875rem; border: 1px solid rgb(211, 214, 219); background-color: rgb(249, 249, 249); overflow: auto; padding: 16px; margin: 0px; direction: ltr; text-align: left; white-space: pre; word-spacing: 0px; word-break: normal; word-wrap: normal; tab-size: 4; hyphens: none; line-height: 19px; -webkit-font-smoothing: auto; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; -webkit-text-stroke-width: 0px;"><div style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 0.875rem; border-radius: 2px; padding: 0px; border: 0px; background-color: rgb(249, 249, 249); line-height: 19px; -webkit-font-smoothing: auto; direction: ltr;"><div>unsafe static void FastCopy(byte[] src, byte[] dst, int count)</div><div>{</div><div>// Unsafe context: can use pointers here.</div><div>}</div></div></div><div style="margin-top: 1rem; margin-bottom: 0px; color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important; padding-right: 25px !important;"><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">不安全上下文的范围从参数列表扩展到方法的结尾，因此也可在以下参数列表中使用指针：</span></div><div style="background-color: rgb(245, 245, 245); color: rgb(112, 112, 112); -webkit-box-orient: horizontal; -webkit-box-direction: normal; flex-direction: row; font-size: 0.8rem; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(224, 224, 224); border-right-color: rgb(224, 224, 224); border-left-color: rgb(224, 224, 224); margin-top: 16px; min-height: 30px; font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"></div><div style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 0.875rem; border: 1px solid rgb(211, 214, 219); background-color: rgb(249, 249, 249); overflow: auto; padding: 16px; margin: 0px; direction: ltr; text-align: left; white-space: pre; word-spacing: 0px; word-break: normal; word-wrap: normal; tab-size: 4; hyphens: none; line-height: 19px; -webkit-font-smoothing: auto; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; -webkit-text-stroke-width: 0px;"><div style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 0.875rem; border-radius: 2px; padding: 0px; border: 0px; background-color: rgb(249, 249, 249); line-height: 19px; -webkit-font-smoothing: auto; direction: ltr;"><div>unsafe static void FastCopy ( byte* ps, byte* pd, int count ) {...}</div></div></div><div style="margin-top: 1rem; margin-bottom: 0px; color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important; padding-right: 25px !important;"><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">还可以使用不安全块从而能够使用该块内的不安全代码。</span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">例如:</span></div><div style="background-color: rgb(245, 245, 245); color: rgb(112, 112, 112); -webkit-box-orient: horizontal; -webkit-box-direction: normal; flex-direction: row; font-size: 0.8rem; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(224, 224, 224); border-right-color: rgb(224, 224, 224); border-left-color: rgb(224, 224, 224); margin-top: 16px; min-height: 30px; font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"></div><div style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 0.875rem; border: 1px solid rgb(211, 214, 219); background-color: rgb(249, 249, 249); overflow: auto; padding: 16px; margin: 0px; direction: ltr; text-align: left; white-space: pre; word-spacing: 0px; word-break: normal; word-wrap: normal; tab-size: 4; hyphens: none; line-height: 19px; -webkit-font-smoothing: auto; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; -webkit-text-stroke-width: 0px;"><div style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 0.875rem; border-radius: 2px; padding: 0px; border: 0px; background-color: rgb(249, 249, 249); line-height: 19px; -webkit-font-smoothing: auto; direction: ltr;"><div>unsafe</div><div>{</div><div>// Unsafe context: can use pointers here.</div><div>}</div></div></div><div style="margin-top: 1rem; margin-bottom: 0px; color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important; padding-right: 25px !important;"><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">若要编译不安全代码，必须指定</span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/language-reference/compiler-options/unsafe-compiler-option" style="color: rgb(0, 120, 215); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important; cursor: pointer; word-wrap: break-word; text-decoration: underline;">/unsafe</a><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">编译器选项。</span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">不能通过公共语言运行时验证不安全代码。</span></div><h2 style="text-rendering: optimizeLegibility; word-wrap: break-word; line-height: 1.3; margin-bottom: 12px; margin-top: 32px; font-size: 1.75rem; color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-rendering: optimizeLegibility; word-wrap: break-word; line-height: 1.3; font-size: 1.75rem; color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">示例</span></h2><div style="background-color: rgb(245, 245, 245); color: rgb(112, 112, 112); -webkit-box-orient: horizontal; -webkit-box-direction: normal; flex-direction: row; font-size: 0.8rem; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(224, 224, 224); border-right-color: rgb(224, 224, 224); border-left-color: rgb(224, 224, 224); margin-top: 16px; min-height: 30px; font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="background-color: rgb(245, 245, 245); color: rgb(112, 112, 112); -webkit-box-orient: horizontal; -webkit-box-direction: normal; font-size: 0.8rem; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(224, 224, 224); border-right-color: rgb(224, 224, 224); border-left-color: rgb(224, 224, 224); min-height: 30px; font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; -webkit-box-flex: 1;">C#</span></div><div style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 0.875rem; border: 1px solid rgb(211, 214, 219); background-color: rgb(249, 249, 249); overflow: auto; padding: 16px; margin: 0px; direction: ltr; text-align: left; white-space: pre; word-spacing: 0px; word-break: normal; word-wrap: normal; tab-size: 4; hyphens: none; line-height: 19px; -webkit-font-smoothing: auto; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; -webkit-text-stroke-width: 0px;"><div style="font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; font-size: 0.875rem; border-radius: 2px; padding: 0px; border: 0px; background-color: rgb(249, 249, 249); line-height: 19px; -webkit-font-smoothing: auto; direction: ltr;"><div><span style="color: green;">// compile with: /unsafe</span></div><div><br/></div><div><span style="color: rgb(1, 1, 253);">class</span> <span style="color: rgb(0, 125, 154);">UnsafeTest</span></div><div>{</div><div><span style="color: green;">// Unsafe method: takes pointer to int:</span></div><div><span style="color: rgb(1, 1, 253);">unsafe</span> <span style="color: rgb(1, 1, 253);">static</span> <span style="color: rgb(1, 1, 253);">void</span> <span style="color: rgb(0, 125, 154);">SquarePtrParam</span>(<span style="color: rgb(1, 1, 253);">int</span>* p)</div><div>{</div><div>*p *= *p;</div><div>}</div><div><br/></div><div><span style="color: rgb(1, 1, 253);">unsafe</span> <span style="color: rgb(1, 1, 253);">static</span> <span style="color: rgb(1, 1, 253);">void</span> <span style="color: rgb(0, 125, 154);">Main</span>()</div><div>{</div><div><span style="color: rgb(1, 1, 253);">int</span> i = 5;</div><div><span style="color: green;">// Unsafe method: uses address-of operator (&amp;):</span></div><div>SquarePtrParam(&amp;i);</div><div>Console.WriteLine(i);</div><div>}</div><div>}</div><div><span style="color: green;">// Output: 25</span></div></div></div><h2 style="text-rendering: optimizeLegibility; word-wrap: break-word; line-height: 1.3; margin-bottom: 12px; margin-top: 32px; font-size: 1.75rem; color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-rendering: optimizeLegibility; word-wrap: break-word; line-height: 1.3; font-size: 1.75rem; color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">C# 语言规范</span></h2><div style="margin-top: 1rem; margin-bottom: 0px; color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important; padding-right: 25px !important;"><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">有关详细信息，请参阅</span><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;"> </span><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/language-reference/language-specification/index" style="color: rgb(0, 120, 215); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important; cursor: pointer; word-wrap: break-word; text-decoration: underline;">C# 语言规范</a><span style="color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); position: relative !important;">。 该语言规范是 C# 语法和用法的权威资料。</span></div><h2 style="text-rendering: optimizeLegibility; word-wrap: break-word; line-height: 1.3; margin-bottom: 12px; margin-top: 32px; font-size: 1.75rem; color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-rendering: optimizeLegibility; word-wrap: break-word; line-height: 1.3; font-size: 1.75rem; color: rgb(0, 0, 0); font-family: segoe-ui_normal, &quot;Segoe UI&quot;, Segoe, &quot;Segoe WP&quot;, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">另请参阅</span></h2><div><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/language-reference/index" style="color: rgb(0, 120, 215); cursor: pointer; word-wrap: break-word; text-decoration: underline;">C# 参考</a></div><div><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/index" style="color: rgb(0, 120, 215); cursor: pointer; word-wrap: break-word; text-decoration: underline;">C# 编程指南</a></div><div><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/index" style="color: rgb(0, 120, 215); cursor: pointer; word-wrap: break-word; text-decoration: underline;">C# 关键字</a></div><div><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/fixed-statement" style="color: rgb(0, 120, 215); cursor: pointer; word-wrap: break-word; text-decoration: underline;">fixed 语句</a></div><div><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/unsafe-code-pointers/index" style="color: rgb(0, 120, 215); cursor: pointer; word-wrap: break-word; text-decoration: underline;">不安全代码和指针</a></div><div style="margin-top: 1em; margin-bottom: 1em;"><a href="https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/unsafe-code-pointers/fixed-size-buffers" style="color: rgb(0, 120, 215); cursor: pointer; word-wrap: break-word; text-decoration: underline;-en-paragraph:true;">固定大小的缓冲区</a></div><div><br/></div></div></span>
</div></body></html> 