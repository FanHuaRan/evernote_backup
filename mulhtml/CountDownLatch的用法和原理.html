<html>
<head>
  <title>CountDownLatch的用法和原理</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1607"/>
<h1>CountDownLatch的用法和原理</h1>

<div>
<span><div><div><b><font style="color: rgb(20, 113, 145); font-size: 18pt;">CountDownLatch的用法</font></b></div><div style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;"><div>CountDownLatch俗称闭锁，是一个同步工具类，在完成一组正在其他线程中执行的操作之前，它允许一个或多个线程一直等待。<br/></div></div><div style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;"><span style="color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif;">主要方法</span></div><div style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;"><span style="color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif;"> public CountDownLatch(int count); //<span style="color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif;">构造方法参数指定了计数器的次数</span> </span></div><div style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;"><span style="color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;"> public void </span><span style="color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif; font-weight: bold;">countDown</span><span style="color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif;">(); //<span style="color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif;">当前线程调用此方法，则计数器减一</span> </span></div><div style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px;"> public void <span style="font-weight: bold;">await</span>() throws <a href="http://www.iteye.com/java/lang/InterruptedException.html" style="color: rgb(0, 102, 153);" title="java.lang 中的类">InterruptedException</a>  //<span style="color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif;">调用此方法会一直阻塞当前线程，直到计时器的值为0</span></div><div style="font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;"> <span style="font-family: Helvetica; font-size: 11pt;">注意：</span><span style="font-weight: bold; font-family: Helvetica; font-size: 11pt;">countDown最好在finally中调用</span></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><font style="font-family: Helvetica;"><span style="font-size: 14.6667px;">示例如下：</span></font></div></div><ol start="1" style="margin: 0px 0px 1px; padding: 2px 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 1em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border: 1px solid rgb(209, 215, 220); color: rgb(43, 145, 175);"><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: rgb(127, 0, 85); font-weight: bold;">public</span><span style="color: black;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold;">class</span><span style="color: black;"> CountDownLatchDemo {  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">    </span><span style="color: rgb(127, 0, 85); font-weight: bold;">final</span><span style="color: black;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold;">static</span><span style="color: black;"> SimpleDateFormat sdf=</span><span style="color: rgb(127, 0, 85); font-weight: bold;">new</span><span style="color: black;"> SimpleDateFormat(</span><span style="color: blue;">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span style="color: black;">);  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">    </span><span style="color: rgb(127, 0, 85); font-weight: bold;">public</span><span style="color: black;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold;">static</span><span style="color: black;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold;">void</span><span style="color: black;"> main(String[] args) </span><span style="color: rgb(127, 0, 85); font-weight: bold;">throws</span><span style="color: black;"> InterruptedException {  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        CountDownLatch latch=</span><span style="color: rgb(127, 0, 85); font-weight: bold;">new</span><span style="color: black;"> CountDownLatch(</span><span style="color: rgb(192, 0, 0);">2</span><span style="color: black;">);</span><span style="color: rgb(0, 130, 0); width: auto; border: 0px;">//两个工人的协作</span><span style="color: black;">  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        Worker worker1=</span><span style="color: rgb(127, 0, 85); font-weight: bold;">new</span><span style="color: black;"> Worker(</span><span style="color: blue;">&quot;zhang san&quot;</span><span style="color: black;">, </span><span style="color: rgb(192, 0, 0);">5000</span><span style="color: black;">, latch);  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        Worker worker2=</span><span style="color: rgb(127, 0, 85); font-weight: bold;">new</span><span style="color: black;"> Worker(</span><span style="color: blue;">&quot;li si&quot;</span><span style="color: black;">, </span><span style="color: rgb(192, 0, 0);">8000</span><span style="color: black;">, latch);  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        worker1.start();</span><span style="color: rgb(0, 130, 0); width: auto; border: 0px;">//</span><span style="color: black;">  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        worker2.start();</span><span style="color: rgb(0, 130, 0); width: auto; border: 0px;">//</span><span style="color: black;">  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        latch.await();</span><span style="color: rgb(0, 130, 0); width: auto; border: 0px;">//等待所有工人完成工作</span><span style="color: black;">  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        System.out.println(</span><span style="color: blue;">&quot;all work done at &quot;</span><span style="color: black;">+sdf.format(</span><span style="color: rgb(127, 0, 85); font-weight: bold;">new</span><span style="color: black;"> Date()));  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">    }  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">      </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">      </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">    </span><span style="color: rgb(127, 0, 85); font-weight: bold;">static</span><span style="color: black;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold;">class</span><span style="color: black;"> Worker </span><span style="color: rgb(127, 0, 85); font-weight: bold;">extends</span><span style="color: black;"> Thread{  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        String workerName;   </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        </span><span style="color: rgb(127, 0, 85); font-weight: bold;">int</span><span style="color: black;"> workTime;  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        CountDownLatch latch;  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        </span><span style="color: rgb(127, 0, 85); font-weight: bold;">public</span><span style="color: black;"> Worker(String workerName ,</span><span style="color: rgb(127, 0, 85); font-weight: bold;">int</span><span style="color: black;"> workTime ,CountDownLatch latch){  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">             </span><span style="color: rgb(127, 0, 85); font-weight: bold;">this</span><span style="color: black;">.workerName=workerName;  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">             </span><span style="color: rgb(127, 0, 85); font-weight: bold;">this</span><span style="color: black;">.workTime=workTime;  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">             </span><span style="color: rgb(127, 0, 85); font-weight: bold;">this</span><span style="color: black;">.latch=latch;  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        }  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        </span><span style="color: rgb(127, 0, 85); font-weight: bold;">public</span><span style="color: black;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold;">void</span><span style="color: black;"> run(){  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">            System.out.println(</span><span style="color: blue;">&quot;Worker &quot;</span><span style="color: black;">+workerName+</span><span style="color: blue;">&quot; do work begin at &quot;</span><span style="color: black;">+sdf.format(</span><span style="color: rgb(127, 0, 85); font-weight: bold;">new</span><span style="color: black;"> Date()));  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">            doWork();</span><span style="color: rgb(0, 130, 0); width: auto; border: 0px;">//工作了</span><span style="color: black;">  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">            System.out.println(</span><span style="color: blue;">&quot;Worker &quot;</span><span style="color: black;">+workerName+</span><span style="color: blue;">&quot; do work complete at &quot;</span><span style="color: black;">+sdf.format(</span><span style="color: rgb(127, 0, 85); font-weight: bold;">new</span><span style="color: black;"> Date()));  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">            latch.countDown();</span><span style="color: rgb(0, 130, 0); width: auto; border: 0px;">//工人完成工作，计数器减一</span><span style="color: black;">  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        }  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">          </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        </span><span style="color: rgb(127, 0, 85); font-weight: bold;">private</span><span style="color: black;"> </span><span style="color: rgb(127, 0, 85); font-weight: bold;">void</span><span style="color: black;"> doWork(){  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">            </span><span style="color: rgb(127, 0, 85); font-weight: bold;">try</span><span style="color: black;"> {  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">                Thread.sleep(workTime);  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">            } </span><span style="color: rgb(127, 0, 85); font-weight: bold;">catch</span><span style="color: black;"> (InterruptedException e) {  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">                e.printStackTrace();  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">            }  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">        }  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">    }  </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">      </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">       </span></li><li style="margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; list-style: decimal; font-size: 1em; border-left: 1px solid rgb(209, 215, 220);"><span style="color: black;">}  </span></li></ol><div style="margin: 0px; padding: 0px; color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-family: Helvetica, Tahoma, Arial, sans-serif;"><span style="color: rgb(0, 0, 0); font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif;">输出：</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Worker zhang san do work begin at 2011-04-14 11:05:11</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Worker li si do work begin at 2011-04-14 11:05:11</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Worker zhang san do work complete at 2011-04-14 11:05:16</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">Worker li si do work complete at 2011-04-14 11:05:19</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);-en-paragraph:true;">all work done at 2011-04-14 11:05:19</span></div></div><div><br/></div><div><br/></div><div><b><font style="color: rgb(20, 113, 145); font-size: 18pt;">CountDownLatch源码解析</font></b></div><div><font style="font-size: 12pt;">内部包括一个AQS的子类Sync，构造方法当中指定的计数器赋值到了state变量中，重写tryAcquireShared方法和tryReleaseShared方法。</font></div><div><font style="font-size: 12pt;">await方法是调用<span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 0, 192);">sync</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(51, 51, 51);">.acquireSharedInterruptibly(1)</span></font></div><div><font style="font-family: Consolas; color: rgb(51, 51, 51);"><font style="font-size: 12pt;">countDown方法是调用<span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 0, 192);">sync</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(51, 51, 51);">.releaseShared(1);</span></font> </font></div><div>源码如下：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">public</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">class</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">CountDownLatch {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">/**</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * Synchronization control For CountDownLatch.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * Uses AQS state to represent count.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     */</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">private</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">static</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">final</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">class</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">Sync</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">extends</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">AbstractQueuedSynchronizer {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">private</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">static</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">final</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">long</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 14pt; font-weight: bold; font-style: italic;">serialVersionUID</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">= 4982264981922014374L;</span></div><div style="min-height: 16pt;"></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">        Sync(</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">int</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">count</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">            setState(</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">count</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">        }</span></div><div style="min-height: 16pt;"></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">int</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">getCount() {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">return</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">getState();</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">        }</span></div><div style="min-height: 16pt;"></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">protected</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">int</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">tryAcquireShared(</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">int</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">acquires</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">return</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">(getState() == 0) ? 1 : -1;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">        }</span></div><div style="min-height: 16pt;"></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">protected</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">boolean</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">tryReleaseShared(</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">int</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">releases</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 14pt;">// Decrement count; signal when transition to zero</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">for</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">(;;) {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">               </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">int</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">c</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">= getState();</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">               </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">if</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">c</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">== 0)</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">                   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">return</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">false</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">               </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">int</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">nextc</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">=</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">c</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">-1;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">               </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">if</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">(compareAndSetState(</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">c</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">nextc</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">))</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">                   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">return</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">nextc</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">== 0;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">            }</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">        }</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 16pt;"></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">private</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">final</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">Sync</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 14pt;">sync</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 16pt;"></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">/**</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * Constructs a {@code CountDownLatch} initialized with the given count.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 14pt; font-weight: bold;">@param</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">count the number of times</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 14pt;">{@link #countDown}</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">must be invoked</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *        before threads can pass through</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 14pt;">{@link #await}</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 14pt; font-weight: bold;">@throws</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">IllegalArgumentException if {@code count} is negative</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     */</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">public</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">CountDownLatch(</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">int</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">count</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">if</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">count</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">&lt; 0)</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">throw</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">new</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">IllegalArgumentException(</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 14pt;">&quot;count &lt; 0&quot;</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">this</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">.</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 14pt;">sync</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">=</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">new</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">Sync(</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">count</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 16pt;"></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">/**</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * Causes the current thread to wait until the latch has counted down to</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * zero, unless the thread is</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 14pt;">{@linkplain Thread#interrupt interrupted}</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;p&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">If the current count is zero then this method returns immediately.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;p&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">If the current count is greater than zero then the current</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * thread becomes disabled for thread scheduling purposes and lies</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * dormant until one of two things happen:</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;ul&gt;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;li&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">The count reaches zero due to invocations of the</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 14pt;">{@link #countDown}</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">method; or</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;li&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">Some other thread</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 14pt;">{@linkplain Thread#interrupt interrupts}</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * the current thread.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;/ul&gt;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;p&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">If the current thread:</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;ul&gt;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;li&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">has its interrupted status set on entry to this method; or</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;li&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">is</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 14pt;">{@linkplain Thread#interrupt interrupted}</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">while waiting,</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;/ul&gt;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * then</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 14pt;">{@link InterruptedException}</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">is thrown and the current thread's</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * interrupted status is cleared.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 14pt; font-weight: bold;">@throws</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">InterruptedException if the current thread is interrupted</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *         while waiting</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     */</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">public</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">void</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">await()</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">throws</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">InterruptedException {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 14pt;">sync</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">.acquireSharedInterruptibly(1);</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 16pt;"></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">/**</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * Causes the current thread to wait until the latch has counted down to</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * zero, unless the thread is</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 14pt;">{@linkplain Thread#interrupt interrupted}</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">,</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * or the specified waiting time elapses.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;p&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">If the current count is zero then this method returns immediately</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * with the value {@code true}.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;p&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">If the current count is greater than zero then the current</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * thread becomes disabled for thread scheduling purposes and lies</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * dormant until one of three things happen:</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;ul&gt;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;li&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">The count reaches zero due to invocations of the</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 14pt;">{@link #countDown}</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">method; or</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;li&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">Some other thread</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 14pt;">{@linkplain Thread#interrupt interrupts}</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * the current thread; or</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;li&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">The specified waiting time elapses.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;/ul&gt;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;p&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">If the count reaches zero then the method returns with the</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * value {@code true}.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;p&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">If the current thread:</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;ul&gt;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;li&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">has its interrupted status set on entry to this method; or</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;li&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">is</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 14pt;">{@linkplain Thread#interrupt interrupted}</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">while waiting,</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;/ul&gt;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * then</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 14pt;">{@link InterruptedException}</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">is thrown and the current thread's</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * interrupted status is cleared.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;p&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">If the specified waiting time elapses then the value {@code false}</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * is returned.  If the time is less than or equal to zero, the method</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * will not wait at all.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 14pt; font-weight: bold;">@param</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">timeout the maximum time to wait</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 14pt; font-weight: bold;">@param</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">unit the time unit of the {@code timeout} argument</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 14pt; font-weight: bold;">@return</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">{@code true} if the count reached zero and {@code false}</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *         if the waiting time elapsed before the count reached zero</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 14pt; font-weight: bold;">@throws</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">InterruptedException if the current thread is interrupted</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *         while waiting</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     */</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">public</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">boolean</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">await(</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">long</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">timeout</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">, TimeUnit</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">unit</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">)</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">throws</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">InterruptedException {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">return</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 14pt;">sync</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">.tryAcquireSharedNanos(1,</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">unit</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">.toNanos(</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 14pt;">timeout</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">));</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 16pt;"></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">/**</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * Decrements the count of the latch, releasing all waiting threads if</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * the count reaches zero.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;p&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">If the current count is greater than zero then it is decremented.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * If the new count is zero then all waiting threads are re</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">-</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">enabled for</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * thread scheduling purposes.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;p&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">If the current count equals zero then nothing happens.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     */</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">public</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">void</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">countDown() {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 14pt;">sync</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">.releaseShared(1);</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 16pt;"></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">/**</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * Returns the current count.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 14pt;">&lt;p&gt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">This method is typically used for debugging and testing purposes.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 14pt; font-weight: bold;">@return</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">the current count</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     */</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">public</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">long</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">getCount() {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">return</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 14pt;">sync</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">.getCount();</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 16pt;"></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">/**</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * Returns a string identifying this latch, as well as its state.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * The state, in brackets, includes the String {@code &quot;Count =&quot;}</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     * followed by the current count.</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     *</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 14pt; font-weight: bold;">@return</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">a string identifying this latch, as well as its state</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14pt;">     */</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">public</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">String toString() {</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">return</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 14pt; font-weight: bold;">super</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">.toString() +</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 14pt;">&quot;[Count = &quot;</span> <span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">+</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 14pt;">sync</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">.getCount() +</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 14pt;">&quot;]&quot;</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 16pt;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14pt; color: rgb(51, 51, 51);">}</span></div></div><div><br/></div></div></span>
</div></body></html> 