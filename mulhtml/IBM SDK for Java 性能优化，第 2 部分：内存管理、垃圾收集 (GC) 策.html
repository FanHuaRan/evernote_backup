<html>
<head>
  <title>IBM SDK for Java 性能优化，第 2 部分：内存管理、垃圾收集 (GC) 策略和垃圾收集诊断工具</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="930"/>
<h1>IBM SDK for Java 性能优化，第 2 部分：内存管理、垃圾收集 (GC) 策略和垃圾收集诊断工具</h1>

<div>
<span><div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">在上一篇文章中，我们大致概述了IBM J9 JVM 架构，查看了 JIT 编译器如何优化机器代码来提高应用程序性能。本文将重点介绍内存管理，介绍关于可用于不同工作负载的垃圾收集策略的相关信息。我们还将介绍如何使用诊断工具监控性能，查明问题，并推荐与内存管理相关的调优选项。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-weight: bold;">本系列的其他文章：</span></div><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">第 1 部分：</span><span style="border: 0px;"> </span><a href="https://developer.ibm.com/cn/blog/2017/ibm-sdk-for-java-part1/" style="border: 0px; color: rgb(59, 108, 170);">J9 JVM 架构基础和 JIT 编译器</a><span style="border: 0px;">。</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">第 3 部分:</span><span style="border: 0px;"> </span><a href="https://developer.ibm.com/cn/blog/2017/ibm-sdk-for-java-part3/" style="border: 0px; color: rgb(59, 108, 170);">Java 并发性和锁定</a><span style="border: 0px;">。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">文章中提供了更多信息的链接。</span></div><h4 style="margin: 40px 0px 0px; padding: 0px 0px 15px; border: 0px; font-size: 1.25rem; line-height: 1.5625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; color: rgb(50, 50, 50); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="border: 0px; font-size: 1.25rem; line-height: 1.5625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; color: rgb(50, 50, 50); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">内存空间</span></h4><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">J9 JVM 由以下内存空间组成：</span></div><table style="font-size: 15px; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 502px;"></col><col style="width: 502px;"></col></colgroup><tbody style="margin: 0px; padding: 0px; vertical-align: baseline; font-size: inherit;"><tr style="padding: 0px; vertical-align: baseline; font-size: inherit; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: normal;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div><span style="font-weight: bold; border: 0px;">内存空间</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div><span style="font-weight: bold; border: 0px;">描述</span></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>Java 堆</div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>Java 程序的类实例和数组的主要存储。</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>类元数据</div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>保存类的内部表示（ROM/RAM 类）。</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>JVM 工作区</div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>保存 JVM 和垃圾收集器所使用的内部数据结构。JCL 可能也会分配原生内存（例如直接字节缓冲区）。</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>JIT 编译的代码缓存</div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>保存生成的原生代码。</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>JIT 编译的代码数据缓存</div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>保存生成的原生代码的元数据（JIT 编译器创建的额外信息）。</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>JIT 编译器临时内存</div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>JIT编译器工作区，用于在编译Java方法时内部保存数据结构。可在编译后完全释放。</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>JIT 编译器持久内存</div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 502px; padding: 8px;"><div>在各个编译之间持久保存的 JIT 编译器内部数据结构。在编译时和运行时同时使用。示例包括类分层结构表、运行时假设表和分析数据。</div></td></tr></tbody></table><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="IBM SDK for Java 性能优化，第 2 部分：内存管理、垃圾收集 (GC) 策_files/Image.png" type="image/png" data-filename="Image.png" style="margin: 0px; padding: 0px; border: 0px; max-width: 600px !important; height: auto; width: 600px;"/></div><h4 style="margin: 40px 0px 0px; padding: 0px 0px 15px; border: 0px; font-size: 1.25rem; line-height: 1.5625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; color: rgb(50, 50, 50); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="border: 0px; font-size: 1.25rem; line-height: 1.5625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; color: rgb(50, 50, 50); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">J9 对象模型</span></h4><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">用来表示 Java 对象的对象模型的JVM 实现 (JVM implementation) 会有所不同；同一个对象在两个不同的 JVM 实现中可能有不同的大小和形状。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(50, 50, 50); font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">对象模型表示 Java 对象的方式涉及 4 个方面：</span></div><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-weight: bold;">字段和数组元素大小。</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">用于表示某个给定数据类型的字段或数组元素的字节数可能有所不同。例如，如果数据类型为</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 14.4px; line-height: 1.2em; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">byte</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">可能将对象表示为一个 8 位或 32 位值。在 J9 中，</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 14.4px; line-height: 1.2em; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">Boolean</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">,</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 14.4px; line-height: 1.2em; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">byte</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">,</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 14.4px; line-height: 1.2em; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">short</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">, 或</span><span style="border: 0px; font-size: 14.4px; line-height: 1.2em; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">char</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">字段按如下方式表示：</span></div><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">非数组对象： 32 位值</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px; font-size: 14.4px; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; line-height: 1.2em; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">byte</span><span style="border: 0px;"> </span><span style="border: 0px;">或</span><span style="border: 0px; font-size: 14.4px; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; line-height: 1.2em; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">boolean</span><span style="border: 0px;">数组元素：8 位值</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px; font-size: 14.4px; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; line-height: 1.2em; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">char</span><span style="border: 0px;"> </span><span style="border: 0px;">或</span><span style="border: 0px;"> </span><span style="border: 0px; font-size: 14.4px; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; line-height: 1.2em; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">short</span><span style="border: 0px;">数组元素：16 位值</span></div></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-weight: bold;">对象和字段对齐。</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">一般而言，会为每个 Java 对象分配一个所有 JVM 实现中的最低保证对齐边界。而且，JVM 通常会将</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-style: italic;">N</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">字节大小的字段与肯定为</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-style: italic;">N.</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">的倍数的地址对齐。但是，为对齐而插入的填充字节数可能不同。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">但是，为对齐而插入的填充字节数可能不同。</span></div></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-weight: bold;">64 位压缩引用。</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">JVM 实现支持 64 位引用压缩（将 Java 对象引用表示为 32 位值而不是 64 位值），支持的最大大小为最大 Java 可变堆阈值。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">在 J9 中，支持最高 64 GB 的最大理论堆大小的压缩引用。实际上，在大部分操作系统上，允许使用约 57 GB 的最大堆大小；在 z/OS 系统上，从 IBM JDK V8 服务更新包 2 开始，可使用 62 GB 的最大大小。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">由于在用户指定了超过 4 GB 的最大堆大小时，必须执行转换来压缩和解压存取的引用字段，所以压缩引用可能产生吞吐量开销。但实际上，只要最大值超过 2.5 GB，就会导致转换和相应的开销。因此，如果想获得最高的 64 位性能，一定要知道压缩引用特性，因为从 32 位值与 64 位值之间的转换过渡到禁用压缩引用，取决于所使用的最大堆大小。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">当然，使用压缩引用不但可以获得更好的对象位置，还能降低垃圾收集频率，这通常足以带来正面的优势，甚至在存在转换时也是如此。请参阅 IBM 知识中心内的使用压缩引用提高堆使用效率。</span></div></div><div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-weight: bold;">对象标头。</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">每个 Java 对象和数组中的标头字段数量和标头中每个字段的含义也可能有所不同。在 J9 中，非数组对象有一个标头字段，数组对象有一个额外的</span><span style="border: 0px; font-size: 14.4px; line-height: 1.2em; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">arraylength</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">字段。类指针槽的大小为：</span></div><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">在 32 位 JVM 或 64 位压缩引用 JVM 上，该大小为 32 位</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">在 64 位非压缩引用 JVM 上，该大小为 64 位</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">在每种情况下，底部 8 位都用于标志，比如对象存在时长和哈希值位。因此，J9 中的类与 8 字节边界对齐。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">对于我们认为可能需要同步的对象类型，还有一个监控字段，在垃圾收集器删除对象和程序对其计算哈希值后，还有一个可选的哈希字段。</span></div><hr style="margin: 10px 0px; border: 0px; height: 1px; padding: 0px; background: rgb(199, 199, 199);"/><div style="margin: 0px; padding: 0px; border: 0px; font-size: 1rem;"><div><img src="IBM SDK for Java 性能优化，第 2 部分：内存管理、垃圾收集 (GC) 策_files/Image [1].png" type="image/png" data-filename="Image.png" style="margin: 20px 0px 0px !important; padding: 0px; border: 0px; max-width: 100%; height: auto;"/></div><h5 style="margin: 40px 0px 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;">标头可能包含额外的槽：</span></h5><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">数组大小（仅限数组）</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">监控（同步的对象）</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">哈希值（可以位于对象末尾</span></div><h5 style="margin: 40px 0px 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;">对象引用和类指针槽可以为：</span></h5><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">32 位（带压缩引用的 32 位 JVM 或 64 位 JVM）</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">64 位（64 位 JVM）</span></div><h5 style="margin: 40px 0px 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;">示例标志：</span></h5><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">对象存在时长</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">对象是否经过哈希运算</span></div></div><hr style="margin: 10px 0px; border: 0px; height: 1px; padding: 0px; background: rgb(199, 199, 199);"/><div style="margin: 0px; padding: 0px; border: 0px; font-size: 1rem;"><div><img src="IBM SDK for Java 性能优化，第 2 部分：内存管理、垃圾收集 (GC) 策_files/Image [2].png" type="image/png" data-filename="Image.png" style="margin: 20px 0px 0px !important; padding: 0px; border: 0px; max-width: 100%; height: auto;"/></div><h5 style="margin: 40px 0px 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;">带压缩引用的 64 位 JVM 是首选，原因如下：</span></h5><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">低资源占用（与 32 位相当）。</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">获得各种 64 位特性的好处（例如，x86 架构上的更多寄存器）。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">备注：由于原生与压缩格式之间的转换，可能存在性能降级。</span></div><h5 style="margin: 40px 0px 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;">32 位 JVM 是一个可单独下载的虚拟机：</span></h5><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">性能较差，因此已逐渐淘汰。</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">在传统 32 位 JNI 代码中可能需要链接到它</span></div></div><hr style="margin: 10px 0px; border: 0px; height: 1px; padding: 0px; background: rgb(199, 199, 199);"/><h3 style="margin: 40px 0px 0px; padding: 0px 0px 15px; border: 0px; font-size: 1.5625rem; line-height: 1.875rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;"><span style="border: 0px; font-size: 1.5625rem; line-height: 1.875rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;">垃圾收集 (GC)</span></h3><h4 style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1.25rem; line-height: 1.5625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;"><span style="border: 0px; font-size: 1.25rem; line-height: 1.5625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;">垃圾收集选项和默认值</span></h4><h5 style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-weight: bold; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;">通用堆大小选项：</span></h5><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px; font-size: 14.4px; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; line-height: 1.2em; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xmx</span><span style="border: 0px;"> </span><span style="border: 0px;">最大堆大小</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 14.4px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xms</span> 初始和最小总堆大小。如果使用 Generational Concurrent 策略 (gencon)，此值包含 Tenure 和 Nursery 区域。</div><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">Nursery 初始和最小大小是</span><span style="border: 0px; font-size: 14.4px; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; line-height: 1.2em; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xms</span><span style="border: 0px;">值的 25%；最大大小是最大</span><span style="border: 0px; font-size: 14.4px; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; line-height: 1.2em; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xms</span><span style="border: 0px;">值的 25%。</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">当前 Nursery 大小介于它的最小与最大大小之间，无论当前的</span><span style="border: 0px; font-size: 14.4px; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; line-height: 1.2em; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xms</span><span style="border: 0px;">值是多少。</span></div></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px; font-size: 14.4px; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; line-height: 1.2em; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xmn</span><span style="border: 0px;">准确的 Nursery 大小（为平衡策略分配 (Eden) 大小）</span></div><h5 style="margin: 40px 0px 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-weight: bold; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;">更详细的堆大小选项：</span></h5><table style="vertical-align: baseline; font-size: inherit; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 488px;"></col><col style="width: 488px;"></col></colgroup><tbody style="margin: 0px; padding: 0px; vertical-align: baseline; font-size: inherit;"><tr style="padding: 0px; vertical-align: baseline; font-size: inherit; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: normal;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-weight: bold; border: 0px;">选项</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-weight: bold; border: 0px;">描述</span></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xmca32K</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>RAM 类分段增量</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xmco128K</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>ROM 类分段增量</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xmcrs200M</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>压缩引用元数据初始大小</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xmns1M</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>初始新空间大小</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xmmnx128M</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>最大新空间大小</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xms4M</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>初始内存大小</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xmos3m</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>初始旧空间大小</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xmox512M</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>最大旧空间大小</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xmx512M</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>内存最大值</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xmr16K</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>记住的设置大小</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xlp: objectheap:pagesize=2M</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>大页面大小（支持 4K 和 2M）</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xlp:codecache:pagesize=2M</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>用于 JIT 代码缓存的大页面大小（支持 4K 和 2M）</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xmso256K</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>操作系统线程堆栈大小</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xiss2K</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>Java 线程堆栈初始大小</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xssi16K</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>Java 线程堆栈增量</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xss1M</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 488px; padding: 8px;"><div>Java 线程堆栈最大大小</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td><td style="width: 488px; padding: 8px; border: 1px solid rgb(204, 204, 204);"><div><br/></div></td></tr></tbody></table><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">请注意，不同平台上的默认值可能不同。因此，可运行 java -verbose:sizes 来获取您的系统使用的默认值。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">J9 使用的策略是，如果 Java 进程未锁定到任何特定核心或 NUMA 节点，则在系统上的所有非均匀内存存取 (NUMA) 节点上等量地插入 Java 堆内存。这可能减少性能波动（远程 NUMA 存取预计会在不同线程上大体均匀地执行，但在不同线程存取的内存是不规则分配时，可能不会均匀执行该存取）。但是，在大多数情况下，使用单一分配线程来存取内存时，也有可能降低总体性能。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">从 IBM JDK V8 服务更新包 2 开始，可使用</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 14.4px; line-height: 1.2em; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">–XX:-InterleaveMemory</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">禁用选项来禁用 NUMA 插入。在未来的产品版本中，可能会重新评估执行 NUMA 插入的默认策略，所以您应参阅版本文档来查找未来的更改。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">使用大型页面可能也会影响性能 (例如，</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><a href="https://www.kernel.org/doc/Documentation/vm/hugetlbpage.txt" style="border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(59, 108, 170);">请参阅 Linux 内核中的 hugetlbpage 支持</a><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">).</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">J9 遵循的策略是，为小于 1 GB 的所有大型页面默认使用手动配置的大型页面策略，不需要指定任何选项。对于 1 GB 的大型页面，必须指定选项</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 14.4px; line-height: 1.2em; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">–Xlp:pagesize=1G</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">。在具有透明大型页面支持的系统上(参阅</span><a href="https://www.kernel.org/doc/Documentation/vm/transhuge.txt" style="border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(59, 108, 170);">透明大型页面支持</a><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">),内核使用大型页面时完全不需要 JVM 的干预。</span></div><h4 style="margin: 40px 0px 0px; padding: 0px 0px 15px; border: 0px; font-size: 1.25rem; line-height: 1.5625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;"><span style="border: 0px; font-size: 1.25rem; line-height: 1.5625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;">垃圾收集策略</span></h4><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">IBM JVM 有许多垃圾收集策略。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">默认策略是“分代并发”(</span><span style="border: 0px; font-size: 14.4px; line-height: 1.2em; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">gencon</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">),这通常是首选。为了更好地控制垃圾收集暂停时间，通常会使用“基于区域”(</span><span style="border: 0px; font-size: 14.4px; line-height: 1.2em; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">balanced</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">)和“软实时”(</span><span style="border: 0px; font-size: 14.4px; line-height: 1.2em; font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">metronome</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">)策略。</span></div><table style="vertical-align: baseline; font-size: inherit; border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 325px;"></col><col style="width: 325px;"></col><col style="width: 325px;"></col></colgroup><tbody style="margin: 0px; padding: 0px; vertical-align: baseline; font-size: inherit;"><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 325px; padding: 8px;"><div>分代并发</div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 325px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xgcpolicy:gencon</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 325px; padding: 8px;"><div>采用不同方式处理短期运行的对象（在 Nursery 中）和长期运行的对象（在 Tenure 中）。采用此策略后，拥有许多短期运行的对象的应用程序通常会有更短的暂停时间，但是仍会得到不错的吞吐量。</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 325px; padding: 8px;"><div>基于区域</div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 325px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xgcpolicy:balanced</span>  </div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 325px; padding: 8px;"><div>使用与<span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">gencon</span>类似的并发和分代技术，但基于区域来组织堆。如果全局垃圾收集（特别是由于压缩）导致应用程序暂停时间出现问题，此策略可能会牺牲一定的吞吐量来改善应用程序响应速度。在其他一些情况下，也可将它称为<span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">gencon</span>：NUMA 利用、增量类卸载，以及在对象活跃性、堆占用和对象分配中迥然不同的工作负载的更好处理。</div></td></tr><tr style="padding: 0px; vertical-align: baseline; font-size: inherit;"><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 325px; padding: 8px;"><div>软实时</div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 325px; padding: 8px;"><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">-Xgcpolicy:metronome</span></div></td><td style="vertical-align: baseline; font-size: 0.9375rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif; font-weight: 300; border: 1px solid rgb(224, 224, 224); width: 325px; padding: 8px;"><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">一个增量、确定性垃圾收集器，具有较短的暂停时间和有保证的最大垃圾收集吞吐量开销。依赖于精准响应时间的应用程序可以利用此技术，避免可能由于垃圾收集活动导致的长延迟。</span></div></td></tr></tbody></table><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">IBM 知识中心内的</span><a href="http://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/com.ibm.java.lnx.80.doc/diag/appendixes/cmdline/xgcpolicy.html" style="border: 0px; font-size: 14.4px; line-height: 1.2em; color: rgb(85, 85, 85); font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; white-space: pre-wrap; word-wrap: break-word; background: rgb(244, 244, 244);">-Xgcpolicy</a><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;"> </span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">主题中列出了所有垃圾收集策略。请在以下 IBM developerWorks 文章中进一步了解垃圾收集策略：</span></div><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><a href="https://www.ibm.com/developerworks/cn/websphere/techjournal/1106_bailey/1106_bailey.html" style="border: 0px; color: rgb(59, 108, 170);">使用分代收集策略作为新的默认策略</a></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><a href="https://www.ibm.com/developerworks/cn/websphere/techjournal/1108_sciampacone/1108_sciampacone.html" style="border: 0px; color: rgb(59, 108, 170);">新的平衡垃圾收集选项</a></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><a href="https://www.ibm.com/developerworks/cn/java/j-rtj4/index.html" style="border: 0px; color: rgb(59, 108, 170);">实时垃圾收集</a></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><a href="https://www.ibm.com/developerworks/cn/java/j-ibmjava2/index.html" style="border: 0px; color: rgb(59, 108, 170);">Java 技术，IBM 风格：垃圾收集策略，第 1 部分</a></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><a href="https://www.ibm.com/developerworks/cn/java/j-ibmjava3/index.html?ca=drs-" style="border: 0px; color: rgb(59, 108, 170);">Java 技术，IBM 风格：垃圾收集策略，第 2 部分</a></div><h4 style="margin: 40px 0px 0px; padding: 0px 0px 15px; border: 0px; font-size: 1.25rem; line-height: 1.5625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;"><span style="border: 0px; font-size: 1.25rem; line-height: 1.5625rem; font-family: ibm-plex-sans, &quot;Helvetica Neue&quot;, Arial, sans-serif;">IBM 垃圾收集诊断工具</span></h4><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-weight: bold;">1.详细的垃圾收集日志和垃圾收集和内存可视化器 (Garbage Collection and Memory Visualizer (GCMV))。</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">详细的垃圾收集日志提供了空闲内存、分配统计数据，以及各种关于垃圾收集活动的特定于 Java 的指标（例如终结 (finalization) 和软引用处理）和非特定指标（例如复制的对象和 remembered-set）的详细信息。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">下面示例给出了一个 Scavenge（gencon 策略内的本地垃圾收集周期）的样本日志，其中显示 Nursery 中的内存/分配空间在垃圾收集之前已耗尽（0% 空闲），在垃圾收集操作后得到恢复（85% 空闲），还显示了垃圾收集操作本身的细节。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 0.9375rem; font-family: ibm-plex-mono, Menlo, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, Courier, monospace;"><div><br/></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">exclusive-start id=&quot;113&quot; timestamp=&quot;2016-06-21T15:54:51.043&quot; intervalms=&quot;2419.486&quot;&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;response-info timems=&quot;3.056&quot; idlems=&quot;2.612&quot; threads=&quot;37&quot; lastid=&quot;080FA100&quot; lastname=&quot;JIT Compilation Thread-2&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;/exclusive-start&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;af-start id=&quot;114&quot; totalBytesRequested=&quot;152&quot; timestamp=&quot;2016-06-21T15:54:51.043&quot; intervalms=&quot;2419.457&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;cycle-start id=&quot;115&quot; type=&quot;scavenge&quot; contextid=&quot;0&quot; timestamp=&quot;2016-06-21T15:54:51.043&quot; intervalms=&quot;2419.447&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;gc-start id=&quot;116&quot; type=&quot;scavenge&quot; contextid=&quot;115&quot; timestamp=&quot;2016-06-21T15:54:51.043&quot;&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem-info id=&quot;117&quot; free=&quot;1563849376&quot; total=&quot;2147418112&quot; percent=&quot;72&quot;&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem type=&quot;nursery&quot; free=&quot;0&quot; total=&quot;536870912&quot; percent=&quot;0&quot;&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem type=&quot;allocate&quot; free=&quot;0&quot; total=&quot;390266880&quot; percent=&quot;0&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem type=&quot;survivor&quot; free=&quot;0&quot; total=&quot;146604032&quot; percent=&quot;0&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;/mem&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem type=&quot;tenure&quot; free=&quot;1563849376&quot; total=&quot;1610547200&quot; percent=&quot;97&quot;&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem type=&quot;soa&quot; free=&quot;1483322016&quot; total=&quot;1530019840&quot; percent=&quot;96&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem type=&quot;loa&quot; free=&quot;80527360&quot; total=&quot;80527360&quot; percent=&quot;100&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;/mem&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;remembered-set count=&quot;3167&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;/mem-info&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;/gc-start&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;allocation-stats totalBytes=&quot;387776608&quot; &gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;allocated-bytes non-tlh=&quot;4080&quot; tlh=&quot;387772528&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;largest-consumer threadName=&quot;WebContainer : 29&quot; threadId=&quot;33074B00&quot; bytes=&quot;13873856&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;/allocation-stats&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;gc-op id=&quot;118&quot; type=&quot;scavenge&quot; timems=&quot;7.277&quot; contextid=&quot;115&quot; timestamp=&quot;2016-06-21T15:54:51.051&quot;&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;scavenger-info tenureage=&quot;5&quot; tenuremask=&quot;ffe0&quot; tiltratio=&quot;72&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;memory-copied type=&quot;nursery&quot; objects=&quot;50073&quot; bytes=&quot;2181016&quot; bytesdiscarded=&quot;147920&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;memory-copied type=&quot;tenure&quot; objects=&quot;5670&quot; bytes=&quot;474060&quot; bytesdiscarded=&quot;83288&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;finalization candidates=&quot;4&quot; enqueued=&quot;2&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;references type=&quot;weak&quot; candidates=&quot;12&quot; cleared=&quot;0&quot; enqueued=&quot;0&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;references type=&quot;phantom&quot; candidates=&quot;280&quot; cleared=&quot;8&quot; enqueued=&quot;8&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;/gc-op&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;gc-end id=&quot;119&quot; type=&quot;scavenge&quot; contextid=&quot;115&quot; durationms=&quot;7.472&quot; usertimems=&quot;12.001&quot; systemtimems=&quot;0.000&quot; timestamp=&quot;2016-06-21T15:54:51.051&quot; activeThreads=&quot;2&quot;&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem-info id=&quot;120&quot; free=&quot;1980031608&quot; total=&quot;2147418112&quot; percent=&quot;92&quot;&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem type=&quot;nursery&quot; free=&quot;416743424&quot; total=&quot;536870912&quot; percent=&quot;77&quot;&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem type=&quot;allocate&quot; free=&quot;416743424&quot; total=&quot;419102720&quot; percent=&quot;99&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem type=&quot;survivor&quot; free=&quot;0&quot; total=&quot;117768192&quot; percent=&quot;0&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;/mem&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem type=&quot;tenure&quot; free=&quot;1563288184&quot; total=&quot;1610547200&quot; percent=&quot;97&quot;&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem type=&quot;soa&quot; free=&quot;1482760824&quot; total=&quot;1530019840&quot; percent=&quot;96&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;mem type=&quot;loa&quot; free=&quot;80527360&quot; total=&quot;80527360&quot; percent=&quot;100&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;/mem&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;pending-finalizers system=&quot;2&quot; default=&quot;0&quot; reference=&quot;8&quot; classloader=&quot;0&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;remembered-set count=&quot;2425&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;/mem-info&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;/gc-end&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;cycle-end id=&quot;121&quot; type=&quot;scavenge&quot; contextid=&quot;115&quot; timestamp=&quot;2016-06-21T15:54:51.051&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;allocation-satisfied id=&quot;122&quot; threadId=&quot;36983A00&quot; bytesRequested=&quot;152&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;af-end id=&quot;123&quot; timestamp=&quot;2016-06-21T15:54:51.051&quot; /&gt;</span></div><div><span style="font-family: Monaco, Consolas, &quot;Andale Mono&quot;, &quot;DejaVu Sans Mono&quot;, monospace; font-size: 13.5px; line-height: 1.2em; white-space: pre-wrap; border: 0px; word-wrap: break-word; color: rgb(85, 85, 85); background: rgb(244, 244, 244);">&lt;exclusive-end id=&quot;124&quot; timestamp=&quot;2016-06-21T15:54:51.051&quot; durationms=&quot;7.765&quot; /&gt;</span></div></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">IBM Monitoring and Diagnostic Tools – Garbage Collection and Memory Visualizer (GCMV) 工具可以用图形表示大部分这类信息，将它们显示为时间的函数，以方便理解和帮助查明异常活动。该工具还会提供摘要，查明问题并推荐修复方案。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><div>下图展示了来自 GCMV 的典型输出：</div><div style="margin-top: 1em; margin-bottom: 1em;"><img src="IBM SDK for Java 性能优化，第 2 部分：内存管理、垃圾收集 (GC) 策_files/Image [3].png" type="image/png" data-filename="Image.png" style="margin: 0px; padding: 0px; border: 0px; max-width: 100%; height: auto;"/></div></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">通过图形直观显示暂停时间、空闲堆内存和（Nursery 内的）翻转对象数量随时间的变化情况。可以轻松地发现一个暂停时间异常值，大约在 60 秒标记处。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">要获得更多信息，请参阅以下文章：</span></div><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">IBM 知识中心内的</span><a href="https://www.ibm.com/support/knowledgecenter/SS3KLZ/com.ibm.java.diagnostics.visualizer.doc/introduction.html" style="border: 0px; color: rgb(59, 108, 170);"> </a><a href="https://www.ibm.com/support/knowledgecenter/SS3KLZ/com.ibm.java.diagnostics.visualizer.doc/introduction.html" style="border: 0px; color: rgb(59, 108, 170);">Garbage Collection and Memory Visualizer</a></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">IBM 知识中心内的</span><a href="http://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/com.ibm.java.lnx.80.doc/diag/tools/gcpd_verbosegc.html" style="border: 0px; color: rgb(59, 108, 170);">详细垃圾收集日志</a></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">IBM developerWorks 中的</span><a href="https://www.ibm.com/developerworks/java/jdk/tools/gcmv/" style="border: 0px; color: rgb(59, 108, 170);"> </a><a href="https://www.ibm.com/developerworks/java/jdk/tools/gcmv/" style="border: 0px; color: rgb(59, 108, 170);">Garbage Collection and Memory Visualizer 2.8 版</a></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-weight: bold;">2.Health Center。</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">IBM Monitoring and Diagnostic Tools – Health Center 可以监控垃圾收集活动和内存使用情况。它还可以监控其他许多活动，比如锁定、方法分析和类加载。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">下图展示了来自 Health Center 的典型输出：</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><img src="IBM SDK for Java 性能优化，第 2 部分：内存管理、垃圾收集 (GC) 策_files/Image [4].png" type="image/png" data-filename="Image.png" style="margin: 0px; padding: 0px; border: 0px; max-width: 100%; height: auto;"/></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">请注意，这里显示了两个窗格：</span></div><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">每个类的对象实例的有序分布</span></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">关键垃圾收集指标，比如暂停时间、垃圾收集之间的间隔，以及每种类型的垃圾收集的总次数</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">要获得更多信息，请参阅以下文章：</span></div><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">IBM 知识中心内的</span><a href="https://www.ibm.com/support/knowledgecenter/SS3KLZ/com.ibm.java.diagnostics.healthcenter.doc/topics/introduction.html" style="border: 0px; color: rgb(59, 108, 170);"> </a><a href="https://www.ibm.com/support/knowledgecenter/SS3KLZ/com.ibm.java.diagnostics.healthcenter.doc/topics/introduction.html" style="border: 0px; color: rgb(59, 108, 170);">IBM Monitoring and Diagnostic Tools – Health Center</a></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">IBM developerWorks 中的</span><a href="https://www.ibm.com/developerworks/java/jdk/tools/healthcenter/" style="border: 0px; color: rgb(59, 108, 170);"> </a><a href="https://www.ibm.com/developerworks/java/jdk/tools/healthcenter/" style="border: 0px; color: rgb(59, 108, 170);">IBM Monitoring and Diagnostic Tools – Health Center</a></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-weight: bold;">3.Memory Analyzer。</span><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">The IBM Monitoring and Diagnostic Tools – Memory Analyzer检查内存占用、类分层结构和它们的关系。它可以诊断内存泄露并查明可能的来源。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">下图展示了来自 Memory Analyzer 的典型输出：</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><img src="IBM SDK for Java 性能优化，第 2 部分：内存管理、垃圾收集 (GC) 策_files/Image [5].png" type="image/png" data-filename="Image.png" style="margin: 0px; padding: 0px; border: 0px; max-width: 100%; height: auto;"/></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">请注意，窗格中显示了对象实例的柱状图，包含对象本身和保留的堆大小。对于选择进行进一步检查的类，会生成其他窗格，比如泄露可疑来源的报告，以及选定的对象或类的传入引用链。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">要获得更多信息，请参阅以下文章：</span></div><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><span style="border: 0px;">IBM 知识中心内的</span><a href="https://www.ibm.com/support/knowledgecenter/SS3KLZ/com.ibm.java.diagnostics.memory.analyzer.doc/welcome.html" style="border: 0px; color: rgb(59, 108, 170);"> </a><a href="https://www.ibm.com/support/knowledgecenter/SS3KLZ/com.ibm.java.diagnostics.memory.analyzer.doc/welcome.html" style="border: 0px; color: rgb(59, 108, 170);">IBM Monitoring and Diagnostic Tools for Java – Memory Analyzer</a></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><span style="border: 0px;">IBM developerWorks 中的</span><a href="https://www.ibm.com/developerworks/java/jdk/tools/memoryanalyzer/" style="border: 0px; color: rgb(59, 108, 170);"> </a><a href="https://www.ibm.com/developerworks/java/jdk/tools/memoryanalyzer/" style="border: 0px; color: rgb(59, 108, 170);">IBM Monitoring and Diagnostic Tools for Java – Memory Analyzer 1.4 版</a></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">在下一篇文章中，我们将介绍 Java 并发性，重点介绍如何诊断和避免锁争用和死锁情况。我们还将介绍如何监控 CPU 利用率，以确定应用程序性能中的问题和改进目标。</span></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem; font-weight: bold;">在developerWorks上的相关资源：</span></div><div style="margin: 0px; padding: 0px 0px 0px 28px; border: 0px;"><a href="https://www.ibm.com/developerworks/cn/java/j-jtp10283/index.html" style="border: 0px; color: rgb(59, 108, 170);">垃圾收集简史</a></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><a href="https://www.ibm.com/developerworks/cn/linux/l-memory/index.html" style="border: 0px; color: rgb(59, 108, 170);">内存管理内幕</a></div><div style="margin: 0px; padding: 7px 0px 0px 28px; border: 0px;"><a href="https://www.ibm.com/developerworks/cn/aix/library/0910_wanghz_unixmemory/index.html" style="border: 0px; color: rgb(59, 108, 170);">Unix/Linux 系统自动化管理：内存管理篇</a></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><br/></div><div style="margin: 0px; padding: 0px 0px 15px; border: 0px; font-size: 1rem; line-height: 1.625rem;"><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">本文翻译自：</span><a href="https://developer.ibm.com/javasdk/2017/02/16/memory-spaces-garbage-collection/" style="border: 0px; font-size: 1rem; line-height: 1.625rem; color: rgb(59, 108, 170);">IBM SDK for Java performance optimizations: part two</a><span style="border: 0px; font-size: 1rem; line-height: 1.625rem;">(2017-02-23)</span></div></div><div><br/></div></div></span>
</div></body></html> 