<html>
<head>
  <title>使用单纯的位运算实现加减乘除</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="325"/>
<h1>使用单纯的位运算实现加减乘除</h1>

<div>
<span><div><div>源码地址：<a href="https://github.com/FanHuaRan/ran-stl/blob/master/alo/ran_math.cpp">https://github.com/FanHuaRan/ran-stl/blob/master/alo/ran_math.cpp</a></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">#include</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(163, 21, 21); font-size: 9pt;">&quot;ran_math.h&quot;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">/**</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;"> *基于位运算实现的加减乘除法</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;"> */</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//加法实现</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">add(</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">sum =</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">^</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">;</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//不考虑进一的加法可以使用异或计算</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">carry = (</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">&amp;</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">) &lt;&lt; 1;</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//进一的结果可以使用与运算符左移一位得到</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">while</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">(carry != 0){</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//当没有进一时加法结束</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//迭代</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">tempSum = sum ^ carry;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              carry = (sum &amp; carry) &lt;&lt; 1;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              sum = tempSum;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">return</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">sum;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//减法实现</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">sub(</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//首先取得num2的负数 负数表示是正数的补码</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">oppositor = add(~</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">, 1);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//于是num1+num2可以使用num1+(-num2)来表示</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">return</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">add(</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">, oppositor);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//乘法实现</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">multip(</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//计算结果的绝对值</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">absNum1 =</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">&lt; 0 ? add(~</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">, 1) :</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">absNum2 =</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">&lt; 0 ? add(~</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">, 1) :</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">result = 0;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">/*</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">       for (int i = 0; i &lt; absNum2; i++) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">              result += absNum1;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">       }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">       */</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">multipcand = absNum1;</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//被乘数</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">multiper = absNum2;</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//乘数</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">while</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">(multiper){</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">if</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">(multiper &amp; 0x1) {</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//如果乘数的最后一位为1 则加上一个被乘数</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">                     result = add(result, multipcand);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              multipcand &lt;&lt;= 1;</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//被乘数左移一位</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              multiper &gt;&gt;= 1;</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//乘数右移一位</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//判断符号</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">if</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">((</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">^</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">) &lt; 0) {</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//异号返回负数</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">return</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">add(~result, 1);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">else</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">{</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">return</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">result;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//除法实现</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">division(</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">// 先取被除数和除数的绝对值   </span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">dividend =</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">&gt; 0 ?</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">: add(~</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">, 1);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">divisor =</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">&gt; 0 ?</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">: add(~</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">, 1);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">quotient = 0;</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">// 商   </span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">remainder = 0;</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">// 余数   </span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">for</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">int</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">i = 31; i &gt;= 0; i--) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//比较dividend是否大于divisor的(1&lt;&lt;i)次方，不要将dividend与(divisor&lt;&lt;i)比较，而是用(dividend&gt;&gt;i)与divisor比较，</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">//效果一样，但是可以避免因(divisor&lt;&lt;i)操作可能导致的溢出，如果溢出则会可能dividend本身小于divisor，但是溢出导致dividend大于divisor      </span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">if</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">((dividend &gt;&gt; i) &gt;= divisor) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">                     quotient = add(quotient, 1 &lt;&lt; i);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">                     dividend = sub(dividend, divisor &lt;&lt; i);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">// 确定商的符号   </span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">if</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">((</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num1</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">^</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">) &lt; 0) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">// 如果除数和被除数异号，则商为负数       </span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">              quotient = add(~quotient, 1);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">// 确定余数符号   </span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       remainder =</span> <span style="min-height: 11pt; font-family: NSimSun; color: rgb(128, 128, 128); font-size: 9pt;">num2</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">&gt; 0 ? dividend : add(~dividend, 1);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">       </span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 0, 255); font-size: 9pt;">return</span> <span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">quotient;</span><span style="min-height: 11pt; font-family: NSimSun; color: rgb(0, 128, 0); font-size: 9pt;">// 返回商</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: NSimSun; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div></div><div>原文</div><div>地址：<a href="https://www.jianshu.com/p/7bba031b11e7">https://www.jianshu.com/p/7bba031b11e7</a></div><h1 style="box-sizing: border-box; font-size: 34px; margin: 20px 0px 0px; font-family: -apple-system, &quot;SF UI Display&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-weight: bold; line-height: 1.3; color: rgb(51, 51, 51); word-break: break-word !important; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-size: 34px; font-family: -apple-system, &quot;SF UI Display&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif; font-weight: bold; line-height: 1.3; color: rgb(51, 51, 51); font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; word-break: break-word !important;">位运算实现加、减、乘、除运算</span></h1><div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">我们知道，计算机最基本的操作单元是字节(byte)，一个字节由8个位(bit)组成，一个位只能存储一个0或1，其实也就是高低电平。无论多么复杂的逻辑、庞大的数据、酷炫的界面，最终体现在计算机最底层都只是对0101的存储和运算。因此，了解位运算有助于提升我们对计算机底层操作原理的理解。</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">今天就来看看怎么不使用显式“ + - * /”运算符来实现加减乘除运算。</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">下面我们一个一个来看。</span></div><h2 style="box-sizing: border-box; font-weight: bold; line-height: 1.7; color: rgb(47, 47, 47); margin: 0px 0px 15px; font-size: 24px; text-rendering: optimizeLegibility;"><span style="box-sizing: border-box; font-weight: bold; line-height: 1.7; color: rgb(47, 47, 47); font-size: 24px; text-rendering: optimizeLegibility;">1. 加法运算</span></h2><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">先来个我们最熟悉的十进制的加法运算：</span></div><blockquote style="box-sizing: border-box; padding: 20px; margin: 0px 0px 25px; font-size: 16px; border-left: 6px solid rgb(180, 180, 180); background-color: rgb(247, 247, 247); line-height: 30px; word-break: break-word !important;"><div style="box-sizing: border-box; margin: 0px; font-size: 16px; line-height: 1.7; word-break: break-word !important;"><span style="box-sizing: border-box; font-size: 16px; line-height: 1.7; word-break: break-word !important;">13 + 9 = 22</span></div></blockquote><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">我们像这样来拆分这个运算过程：</span></div><ol style="box-sizing: border-box; margin-top: 0px; margin-bottom: 20px; word-break: break-word !important; padding: 0px; margin-left: 22px;"><li style="box-sizing: border-box; line-height: 30px; margin-bottom: 10px;"><div>不考虑进位，分别对各位数进行相加，结果为sum：</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">个位数3加上9为2；十位数1加上0为1； 最终结果为12；</span></div></li><li style="box-sizing: border-box; line-height: 30px; margin-bottom: 10px;"><div>只考虑进位，结果为carry：</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">3 + 9 有进位，进位的值为10；</span></div></li><li style="box-sizing: border-box; line-height: 30px; margin-bottom: 10px;"><div>如果步骤2所得进位结果carry不为0，对步骤1所得sum，步骤2所得carry重复步骤1、 2、3；如果carry为0则结束，最终结果为步骤1所得sum：</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">这里即是对sum = 12 和carry = 10重复以上三个步骤，(a) 不考虑进位，分别对各位数进行相加:sum = 22; (b) 只考虑进位: 上一步没有进位，所以carry = 0； (c) 步骤2carry = 0，结束，结果为sum = 22.</span></div></li></ol><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">我们发现这三板斧行得通！</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">那我们现在还使用上面的三板斧把十进制运算放在二进制中看看是不是也行的通。</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">13的二进制为0000 1101，9的二进制为0000 1001:</span></div><ol style="box-sizing: border-box; margin-top: 0px; margin-bottom: 20px; word-break: break-word !important; padding: 0px; margin-left: 22px;"><li style="box-sizing: border-box; line-height: 30px; margin-bottom: 10px;"><div>不考虑进位，分别对各位数进行相加：</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">sum = 0000 1101 + 0000 1001 = 0000 0100</span></div></li><li style="box-sizing: border-box; line-height: 30px; margin-bottom: 10px;"><div>考虑进位：</div><div>有两处进位，第0位和第3位，只考虑进位的结果为：</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">carry = 0001 0010</span></div></li><li style="box-sizing: border-box; line-height: 30px; margin-bottom: 10px;"><div>步骤2carry == 0 ?，不为0，重复步骤1 、2 、3；为0则结束，结果为sum：</div><div>本例中，</div><div>(a)不考虑进位sum = 0001 0110;</div><div>(b)只考虑进位carry = 0;</div><div>(c)carry == 0，结束，结果为sum = 0001 0110</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">转换成十进制刚好是22.</span></div></li></ol><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">我们发现，适用于十进制的三板斧同样适用于二进制！仔细观察者三板斧，大家能不能发现其实第一步不考虑进位的加法其实就是异或运算；而第二部只考虑进位就是与运算并左移一位--；第三步就是重复前面两步操作直到第二步进位结果为0。</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">这里关于第三步多说一点。为什么要循环步骤1、 2、 3直到步骤2所得进位carry等于0？其实这是因为有的数做加法时会出现连续进位的情况，举例：3 + 9，我们来走一遍上述逻辑：</span></div><blockquote style="box-sizing: border-box; padding: 20px; margin: 0px 0px 25px; font-size: 16px; border-left: 6px solid rgb(180, 180, 180); background-color: rgb(247, 247, 247); line-height: 30px; word-break: break-word !important;"><div style="box-sizing: border-box; margin: 0px; font-size: 16px; font-weight: 400; line-height: 1.7; word-break: break-word !important;"><div>a = 0011, b = 1001;</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">start;</span></div></div></blockquote><blockquote style="box-sizing: border-box; padding: 20px; margin: 0px 0px 25px; font-size: 16px; border-left: 6px solid rgb(180, 180, 180); background-color: rgb(247, 247, 247); line-height: 30px; word-break: break-word !important;"><div style="box-sizing: border-box; margin: 0px; font-size: 16px; font-weight: 400; line-height: 1.7; word-break: break-word !important;"><div>first loop;</div><div>1.1 sum = 1010</div><div>1.2 carry = 0010</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">1.3 carry != 0 , go on;</span></div></div></blockquote><blockquote style="box-sizing: border-box; padding: 20px; margin: 0px 0px 25px; font-size: 16px; border-left: 6px solid rgb(180, 180, 180); background-color: rgb(247, 247, 247); line-height: 30px; word-break: break-word !important;"><div style="box-sizing: border-box; margin: 0px; font-size: 16px; font-weight: 400; line-height: 1.7; word-break: break-word !important;"><div>second loop;</div><div>2.1 sum = 1000;</div><div>2.2 carry = 0100;</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">2.3 carry != 0, go on;</span></div></div></blockquote><blockquote style="box-sizing: border-box; padding: 20px; margin: 0px 0px 25px; font-size: 16px; border-left: 6px solid rgb(180, 180, 180); background-color: rgb(247, 247, 247); line-height: 30px; word-break: break-word !important;"><div style="box-sizing: border-box; margin: 0px; font-size: 16px; font-weight: 400; line-height: 1.7; word-break: break-word !important;"><div>third loop;</div><div>3.1 sum = 1100;</div><div>3.2 carry = 0000;</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">3.3 carry == 0, stop; result = sum;</span></div></div></blockquote><blockquote style="box-sizing: border-box; padding: 20px; margin: 0px 0px 25px; font-size: 16px; border-left: 6px solid rgb(180, 180, 180); background-color: rgb(247, 247, 247); line-height: 30px; word-break: break-word !important;"><div style="box-sizing: border-box; margin: 0px; font-size: 16px; line-height: 1.7; word-break: break-word !important;"><span style="box-sizing: border-box; font-size: 16px; line-height: 1.7; word-break: break-word !important;">end</span></div></blockquote><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">如上面的栗子，有的加法操作是有连续进位的情况的，所以这里要在第三步检测carry是不是为0，如果为0则表示没有进位了，第一步的sum即为最终的结果。</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">有了上面的分析，我们不难写出如下代码：</span></div><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 15px; margin: 0px 0px 20px; line-height: 1.42857; word-wrap: normal; color: rgb(101, 123, 131); background: rgb(246, 246, 246); border: 1px solid rgb(204, 204, 204); border-radius: 0px; text-size-adjust: none; white-space: pre; word-break: break-word !important;"><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 递归写法</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(38, 139, 210); border-radius: 0px; white-space: pre; border: none;">add</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">num1,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">num2)</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">{</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">if</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(num2 ==</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">)</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">return</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">num1;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">sum = num1 ^ num2;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">carry = (num1 &amp; num2) &lt;&lt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">return</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">add(sum, carry);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div><div><br/></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 迭代写法</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(38, 139, 210); border-radius: 0px; white-space: pre; border: none;">add</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">num1,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">num2)</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">{</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">sum = num1 ^ num2;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">carry = (num1 &amp; num2) &lt;&lt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">while</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(carry !=</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">){</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">a = sum;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">b = carry;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">sum = a ^ b;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">carry = (a &amp; b) &lt;&lt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">return</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">sum;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">我们的计算机其实就是通过上述的位运算实现加法运算的（通过加法器，加法器就是使用上述的方法实现加法的），而程序语言中的+ - * /运算符只不过是呈现给程序员的操作工具，计算机底层实际操作的永远是形如0101的位，所以说位运算真的很重要！</span></div><h2 style="box-sizing: border-box; font-weight: bold; line-height: 1.7; color: rgb(47, 47, 47); margin: 0px 0px 15px; font-size: 24px; text-rendering: optimizeLegibility;"><span style="box-sizing: border-box; font-weight: bold; line-height: 1.7; color: rgb(47, 47, 47); font-size: 24px; text-rendering: optimizeLegibility;">2. 减法运算</span></h2><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">我们知道了位运算实现加法运算，那减法运算就相对简单一些了。我们实现了加法运算，自然的，我们会想到把减法运算11 - 6变形为加法运算11 + (-6)，即一个正数加上一个负数。是的，很聪明，其实我们的计算机也是这样操作的，那有的人会说为什么计算机不也像加法器一样实现一个减法器呢？对的，这样想当然是合理的，但是考虑到减法比加法来的复杂，实现起来比较困难。为什么呢？我们知道加法运算其实只有两个操作，加、 进位，而减法呢，减法会有借位操作，如果当前位不够减那就从高位借位来做减法，这里就会问题了，借位怎么表示呢？加法运算中，进位通过与运算并左移一位实现，而借位就真的不好表示了。所以我们自然的想到将减法运算转变成加法运算。</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">怎么实现呢？</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">刚刚我们说了减法运算可转变成一个正数加上一个负数，那首先就要来看看负数在计算机中是怎么表示的。</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">+8在计算机中表示为二进制的1000，那-8怎么表示呢？</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">很容易想到，可以将一个二进制位（bit）专门规定为符号位，它等于0时就表示正数，等于1时就表示负数。比如，在8位机中，规定每个字节的最高位为符号位。那么，+8就是00001000，而-8则是10001000。这只是直观的表示方法，其实计算机是通过2的补码来表示负数的，那什么是2的补码（同补码，英文是2's complement，其实应该翻译为2的补码）呢？它是一种用二进制表示有号数的方法，也是一种将数字的正负号变号的方式，求取步骤：</span></div><ul style="box-sizing: border-box; margin-top: 0px; margin-bottom: 20px; padding: 0px; word-break: break-word !important; margin-left: 22px;"><li style="box-sizing: border-box; line-height: 30px; margin-bottom: 10px;"><span style="box-sizing: border-box; overflow: visible; word-break: break-word !important;">第一步，每一个二进制位都取相反值，0变成1，1变成0（即反码）。</span></li><li style="box-sizing: border-box; line-height: 30px; margin-bottom: 10px;"><span style="box-sizing: border-box; overflow: visible; word-break: break-word !important;">第二步，将上一步得到的值（反码）加1。</span></li></ul><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">简单来说就是取反加一！</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">关于补码更详细的内容可参</span><a href="https://link.jianshu.com/?t=!https://zh.wikipedia.org/wiki/%E4%BA%8C%E8%A3%9C%E6%95%B8" style="box-sizing: border-box; word-break: break-word !important; color: rgb(49, 148, 208); cursor: pointer;">维基百科-补码</a><span style="box-sizing: border-box; word-break: break-word !important;">，这里不再赘述。</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">其实我们利用的恰巧是补码的可以将数字的正负号变号的功能，这样我们就可以把减法运算转变成加法运算了，因为负数可以通过其对应正数求补码得到。计算机也是通过增加一个补码器配合加法器来做减法运算的，而不是再重新设计一个减法器。</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">以上，我们很容易写出了位运算做减法运算的代码：</span></div><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 15px; margin: 0px 0px 20px; line-height: 1.42857; word-wrap: normal; color: rgb(101, 123, 131); background: rgb(246, 246, 246); border: 1px solid rgb(204, 204, 204); border-radius: 0px; text-size-adjust: none; white-space: pre; word-break: break-word !important;"><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">/*</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">* num1: 减数</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">* num2: 被减数</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">*/</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(38, 139, 210); border-radius: 0px; white-space: pre; border: none;">substract</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">num1,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">num2)</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">{</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">subtractor = add(~num2,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 先求减数的补码（取反加一）</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">result = add(num1, subtractor);</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// add()即上述加法运算　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">return</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">result ;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div></div><h2 style="box-sizing: border-box; font-weight: bold; line-height: 1.7; color: rgb(47, 47, 47); margin: 0px 0px 15px; font-size: 24px; text-rendering: optimizeLegibility;"><span style="box-sizing: border-box; font-weight: bold; line-height: 1.7; color: rgb(47, 47, 47); font-size: 24px; text-rendering: optimizeLegibility;">3. 乘法运算</span></h2><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">我们知道了加法运算的位运算实现，那很容易想到乘法运算可以转换成加法运算，被乘数加上乘数倍的自己不就行了么。这里还有一个问题，就是乘数和被乘数的正负号问题，我们这样处理，先处理乘数和被乘数的绝对值的乘积，然后根据它们的符号确定最终结果的符号即可。步骤如下：</span></div><blockquote style="box-sizing: border-box; padding: 20px; margin: 0px 0px 25px; font-size: 16px; border-left: 6px solid rgb(180, 180, 180); background-color: rgb(247, 247, 247); line-height: 30px; word-break: break-word !important;"><div style="box-sizing: border-box; margin: 0px; font-size: 16px; font-weight: 400; line-height: 1.7; word-break: break-word !important;"><div>(1) 计算绝对值得乘积</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">(2) 确定乘积符号（同号为证，异号为负）</span></div></div></blockquote><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">有了这个思路，代码就不难写了：</span></div><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 15px; margin: 0px 0px 20px; line-height: 1.42857; word-wrap: normal; color: rgb(101, 123, 131); background: rgb(246, 246, 246); border: 1px solid rgb(204, 204, 204); border-radius: 0px; text-size-adjust: none; white-space: pre; word-break: break-word !important;"><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">/*</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">* a: 被乘数</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">* b: 乘数</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">*/</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(38, 139, 210); border-radius: 0px; white-space: pre; border: none;">multiply</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">a,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">b)</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">{</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 取绝对值　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">multiplicand = a &lt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">? add(~a,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">) : a;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">multiplier = b &lt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">? add(~b ,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">) : b;</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 如果为负则取反加一得其补码，即正数　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 计算绝对值的乘积　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">product =</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">count =</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">while</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(count &lt; multiplier) {</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">product = add(product, multiplicand);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">count = add(count,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 这里可别用count++，都说了这里是位运算实现加法　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 确定乘积的符号　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">if</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">((a ^ b) &lt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">) {</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 只考虑最高位，如果a,b异号，则异或后最高位为1；如果同号，则异或后最高位为0；　　　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">product = add(~product,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">return</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">product;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">上面的思路在步骤上没有问题，但是第一步对绝对值作乘积运算我们是通过不断累加的方式来求乘积的，这在乘数比较小的情况下还是可以接受的，但在乘数比较大的时候，累加的次数也会增多，这样的效率不是最高的。我们可以思考，如何优化求绝对值的乘积这一步。</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">考虑我们现实生活中手动求乘积的过程，这种方式同样适用于二进制，下面我以13*14为例，向大家演示如何用手动计算的方式求乘数和被乘数绝对值的乘积。</span></div><div style="box-sizing: border-box; padding-bottom: 25px; width: 700px; margin-left: -40px; text-align: center;"><div style="box-sizing: border-box; z-index: 100; position: relative; transition: background-color 0.1s linear; margin: 0px auto; max-width: 448px; max-height: 310px;"><div style="box-sizing: border-box; z-index: 50; padding-bottom: 310.016px;"></div><div style="box-sizing: border-box; position: absolute; top: 0px; left: 0px; width: 448px; height: 310px; overflow: hidden;"><img src="使用单纯的位运算实现加减乘除_files/Image.png" type="image/png" data-filename="Image.png" style="box-sizing: border-box; border: 0px; vertical-align: middle; max-width: 100%; height: auto; cursor: zoom-in; transition: all 0.15s linear; z-index: 100; filter: blur(0px); opacity: 1;"/></div></div></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">从上图的计算过程可以看出，如果乘数当前位为1，则取被乘数左移一位的结果加到最终结果中；如果当前位为0，则取0加到乘积中（加0也就是什么也不做）；</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">整理成算法步骤：</span></div><blockquote style="box-sizing: border-box; padding: 20px; margin: 0px 0px 25px; font-size: 16px; border-left: 6px solid rgb(180, 180, 180); background-color: rgb(247, 247, 247); line-height: 30px; word-break: break-word !important;"><div style="box-sizing: border-box; margin: 0px; font-size: 16px; font-weight: 400; line-height: 1.7; word-break: break-word !important;"><div>(1) 判断乘数是否为0，为0跳转至步骤(4)</div><div>(2) 将乘数与1作与运算，确定末尾位为1还是为0，如果为1，则相加数为当前被乘数；如果为0，则相加数为0；将相加数加到最终结果中；</div><div>(3) 被乘数左移一位，乘数右移一位；回到步骤(1)</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">(4) 确定符号位，输出结果；</span></div></div></blockquote><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">代码如下：</span></div><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 15px; margin: 0px 0px 20px; line-height: 1.42857; word-wrap: normal; color: rgb(101, 123, 131); background: rgb(246, 246, 246); border: 1px solid rgb(204, 204, 204); border-radius: 0px; text-size-adjust: none; white-space: pre; word-break: break-word !important;"><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(38, 139, 210); border-radius: 0px; white-space: pre; border: none;">multiply</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">a,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">b)</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">{　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">//将乘数和被乘数都取绝对值　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">multiplicand = a &lt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">? add(~a,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">) : a; 　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">multiplier = b &lt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">? add(~b ,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">) : b;　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">//计算绝对值的乘积　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">product =</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">;　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">while</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(multiplier &gt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">) {　　　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">if</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">((multiplier &amp;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0x1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">) &gt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">) {</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 每次考察乘数的最后一位　　　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">product = add(product, multiplicand);　　　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">} 　　　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">multiplicand = multiplicand &lt;&lt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">;</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 每运算一次，被乘数要左移一位　　　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">multiplier = multiplier &gt;&gt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">;</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 每运算一次，乘数要右移一位（可对照上图理解）　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">} 　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">//计算乘积的符号　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">if</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">((a ^ b) &lt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">) {　　　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">product = add(~product,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">} 　　</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">return</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">product;</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div><div><br/></div></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">显而易见，第二种求乘积的方式明显要优于第一种。</span></div><h1 style="box-sizing: border-box; font-size: 26px; margin: 0px 0px 15px; font-weight: bold; line-height: 1.7; color: rgb(47, 47, 47); text-rendering: optimizeLegibility;"><span style="box-sizing: border-box; font-size: 26px; font-weight: bold; line-height: 1.7; color: rgb(47, 47, 47); text-rendering: optimizeLegibility;">4. 除法运算</span></h1><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><div>除法运算很容易想到可以转换成减法运算，即不停的用除数去减被除数，直到被除数小于除数时，此时所减的次数就是我们需要的商，而此时的被除数就是余数。这里需要注意的是符号的确定，商的符号和乘法运算中乘积的符号确定一样，即取决于除数和被除数，同号为证，异号为负；余数的符号和被除数一样。</div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">代码如下：</span></div></div><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 15px; margin: 0px 0px 20px; line-height: 1.42857; word-wrap: normal; color: rgb(101, 123, 131); background: rgb(246, 246, 246); border: 1px solid rgb(204, 204, 204); border-radius: 0px; text-size-adjust: none; white-space: pre; word-break: break-word !important;"><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">/*</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">* a : 被除数</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">* b : 除数</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">*/</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(38, 139, 210); border-radius: 0px; white-space: pre; border: none;">divide</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">a,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">b)</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">{</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 先取被除数和除数的绝对值</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">dividend = a &gt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">? a : add(~a,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">divisor = b &gt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">? a : add(~b,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);</span></div><div><br/></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">quotient =</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">;</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 商</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">remainder =</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">;</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 余数</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 不断用除数去减被除数，直到被除数小于被除数（即除不尽了）</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">while</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(dividend &gt;= divisor){</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 直到商小于被除数</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">quotient = add(quotient,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">dividend = substract(dividend, divisor);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 确定商的符号</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">if</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">((a ^ b) &lt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">){</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 如果除数和被除数异号，则商为负数</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">quotient = add(~quotient,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 确定余数符号</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">remainder = b &gt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">? dividend : add(~dividend,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">return</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">quotient;</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 返回商</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">这里有和简单版乘法运算一样的问题，如果被除数非常大，除数非常小，那就要进行很多次减法运算，有没有更简便的方法呢？</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">上面的代码之所以比较慢是因为步长太小，每次只能用1倍的除数去减被除数，所以速度比较慢。那能不能增大步长呢？如果能，应该怎么增大步长呢？</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">计算机是一个二元的世界，所有的int型数据都可以用[2^0, 2</span><span style="box-sizing: border-box; word-break: break-word !important; vertical-align: super; font-size: smaller; font-size: 12px; line-height: 0; position: relative; top: -0.5em;">1,...,2</span><span style="box-sizing: border-box; word-break: break-word !important;">31]这样一组基来表示（int型最高31位）。不难想到用除数的2</span><span style="box-sizing: border-box; word-break: break-word !important; vertical-align: super; font-size: smaller; font-size: 12px; line-height: 0; position: relative; top: -0.5em;">31,2</span><span style="box-sizing: border-box; word-break: break-word !important;">30,...,2</span><span style="box-sizing: border-box; word-break: break-word !important; vertical-align: super; font-size: smaller; font-size: 12px; line-height: 0; position: relative; top: -0.5em;">2,2</span><span style="box-sizing: border-box; word-break: break-word !important;">1,2^0倍尝试去减被除数，如果减得动，则把相应的倍数加到商中；如果减不动，则依次尝试更小的倍数。这样就可以快速逼近最终的结果。</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">2的i次方其实就相当于左移i位，为什么从31位开始呢？因为int型数据最大值就是2^31啊。</span></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">代码如下：</span></div><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 15px; margin: 0px 0px 20px; line-height: 1.42857; word-wrap: normal; color: rgb(101, 123, 131); background: rgb(246, 246, 246); border: 1px solid rgb(204, 204, 204); border-radius: 0px; text-size-adjust: none; white-space: pre; word-break: break-word !important;"><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(38, 139, 210); border-radius: 0px; white-space: pre; border: none;">divide_v2</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">a,</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">b)</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">{</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 先取被除数和除数的绝对值</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">dividend = a &gt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">? a : add(~a,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">divisor = b &gt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">? a : add(~b,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">quotient =</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">;</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 商</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">remainder =</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">;</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 余数</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">for</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">(</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">int</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">i =</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">31</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">; i &gt;=</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">; i--) {</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">//比较dividend是否大于divisor的(1&lt;&lt;i)次方，不要将dividend与(divisor&lt;&lt;i)比较，而是用(dividend&gt;&gt;i)与divisor比较，</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">//效果一样，但是可以避免因(divisor&lt;&lt;i)操作可能导致的溢出，如果溢出则会可能dividend本身小于divisor，但是溢出导致dividend大于divisor</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">if</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">((dividend &gt;&gt; i) &gt;= divisor) {</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">quotient = add(quotient,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">&lt;&lt; i);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">dividend = substract(dividend, divisor &lt;&lt; i);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 确定商的符号</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">if</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">((a ^ b) &lt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">){</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 如果除数和被除数异号，则商为负数</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">quotient = add(~quotient,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 确定余数符号</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">remainder = b &gt;</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">0</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">? dividend : add(~dividend,</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(42, 161, 152); border-radius: 0px; white-space: pre; border: none;">1</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">);</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(133, 153, 0); border-radius: 0px; white-space: pre; border: none;">return</span> <span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">quotient;</span><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(147, 161, 161); border-radius: 0px; white-space: pre; border: none;">// 返回商</span></div><div><span style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(101, 123, 131); border-radius: 0px; white-space: pre; border: none;">}</span></div></div><div style="box-sizing: border-box; margin: 0px 0px 25px; word-break: break-word !important;"><span style="box-sizing: border-box; word-break: break-word !important;">好了，以上。</span></div></div><div><br/></div></div></span>
</div></body></html> 