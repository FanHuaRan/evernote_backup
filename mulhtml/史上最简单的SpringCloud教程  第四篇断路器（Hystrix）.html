<html>
<head>
  <title>史上最简单的SpringCloud教程 | 第四篇:断路器（Hystrix）</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="426"/>
<h1>史上最简单的SpringCloud教程 | 第四篇:断路器（Hystrix）</h1>

<div>
<span><div><blockquote style="box-sizing: border-box; margin: 0px 0px 1.7em; line-height: 27.2px; padding: 15px 20px; border-left: 10px solid rgba(128, 128, 128, 0.075); background-color: rgba(128, 128, 128, 0.05); border-radius: 0px 5px 5px 0px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px; padding: 0px; box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;"><div>转载请标明出处： </div><div><a href="http://blog.csdn.net/forezp/article/details/69934399" style="box-sizing: border-box; color: rgb(12, 137, 207);">http://blog.csdn.net/forezp/article/details/69934399</a> </div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="-en-paragraph:true;">本文出自</span><a href="http://blog.csdn.net/forezp" style="box-sizing: border-box; color: rgb(12, 137, 207);-en-paragraph:true;">方志朋的博客</a></div></div></blockquote><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">在微服务架构中，根据业务来拆分成一个个的服务，服务与服务之间可以相互调用（RPC），在Spring Cloud可以用RestTemplate+Ribbon和Feign来调用。为了保证其高可用，单个服务通常会集群部署。由于网络原因或者自身的原因，服务并不能保证100%可用，如果单个服务出现问题，调用这个服务就会出现线程阻塞，此时若有大量的请求涌入，Servlet容器的线程资源会被消耗完毕，导致服务瘫痪。服务与服务之间的依赖性，故障会传播，会对整个微服务系统造成灾难性的严重后果，这就是服务故障的“雪崩”效应。</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">为了解决这个问题，业界提出了断路器模型。</span></div><h3 style="margin: 0.8em 0px; padding: 0px; box-sizing: border-box; font-family: &quot;microsoft yahei&quot;; line-height: 1.1; color: rgb(63, 63, 63); text-align: start; font-size: 1.7em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-family: &quot;microsoft yahei&quot;; line-height: 1.1; color: rgb(63, 63, 63); font-size: 1.7em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">一、断路器简介</span></h3><blockquote style="box-sizing: border-box; margin: 0px 0px 1.7em; line-height: 27.2px; padding: 15px 20px; border-left: 10px solid rgba(128, 128, 128, 0.075); background-color: rgba(128, 128, 128, 0.05); border-radius: 0px 5px 5px 0px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;"><span style="box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;">Netflix has created a library called Hystrix that implements the circuit breaker pattern. In a microservice architecture it is common to have multiple layers of service calls.</span></div><div style="margin: 0px; padding: 0px; box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;"><span style="box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;">. —-摘自官网</span></div></blockquote><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Netflix开源了Hystrix组件，实现了断路器模式，SpringCloud对这一组件进行了整合。 在微服务架构中，一个请求需要调用多个服务是非常常见的，如下图：</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="史上最简单的SpringCloud教程  第四篇断路器（Hystrix）_files/Image.png" type="image/png" data-filename="Image.png" style="border: none; box-sizing: border-box; margin-top: 15px; margin-bottom: 15px; max-width: 602px; max-height: 100%; height: auto;"/></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">较底层的服务如果出现故障，会导致连锁故障。当对特定的服务的调用的不可用达到一个阀值（Hystric 是5秒20次） 断路器将会被打开。</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="史上最简单的SpringCloud教程  第四篇断路器（Hystrix）_files/Image [1].png" type="image/png" data-filename="Image.png" style="border: none; box-sizing: border-box; margin-top: 15px; margin-bottom: 15px; max-width: 602px; max-height: 100%; height: auto;"/></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">断路打开后，可用避免连锁故障，fallback方法可以直接返回一个固定值。</span></div><h3 style="margin: 0.8em 0px; padding: 0px; box-sizing: border-box; font-family: &quot;microsoft yahei&quot;; line-height: 1.1; color: rgb(63, 63, 63); text-align: start; font-size: 1.7em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-family: &quot;microsoft yahei&quot;; line-height: 1.1; color: rgb(63, 63, 63); font-size: 1.7em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">二、准备工作</span></h3><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">这篇文章基于上一篇文章的工程，首先启动上一篇文章的工程，启动eureka-server 工程；启动service-hi工程，它的端口为8762。</span></div><h3 style="margin: 0.8em 0px; padding: 0px; box-sizing: border-box; font-family: &quot;microsoft yahei&quot;; line-height: 1.1; color: rgb(63, 63, 63); text-align: start; font-size: 1.7em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-family: &quot;microsoft yahei&quot;; line-height: 1.1; color: rgb(63, 63, 63); font-size: 1.7em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">三、在ribbon使用断路器</span></h3><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">改造serice-ribbon 工程的代码，首先在pox.xml文件中加入spring-cloud-starter-hystrix的起步依赖：</span></div><div style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em; line-height: 23.8px; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="padding: 0px; background: transparent; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: 12.6px; white-space: pre; border-radius: 0px; overflow-x: auto; word-wrap: normal;"><div><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">dependency</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span></div><div><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">groupId</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span>org.springframework.cloud<span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">groupId</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span></div><div><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">artifactId</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span>spring-cloud-starter-hystrix<span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">artifactId</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">dependency</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span></div></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">1</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">2</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">3</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">4</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">在程序的启动类ServiceRibbonApplication 加@EnableHystrix注解开启Hystrix：</span></div><div style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em; line-height: 23.8px; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="padding: 0px; background: transparent; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: 12.6px; white-space: pre; border-radius: 0px; overflow-x: auto; word-wrap: normal;"><div><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@SpringBootApplication</span><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@EnableDiscoveryClient</span><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@EnableHystrix</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">class</span> <span style="box-sizing: border-box; color: rgb(102, 0, 102);">ServiceRibbonApplication</span> <span style="box-sizing: border-box;">{</span></div><div><br/></div><div><span style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span style="color: rgb(0, 0, 136); box-sizing: border-box;">static</span> <span style="color: rgb(0, 0, 136); box-sizing: border-box;">void</span> <span style="box-sizing: border-box;">main</span>(String[] args) {</div><div>SpringApplication.run(ServiceRibbonApplication.class, args);</div><div>}</div><div><br/></div><div><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@Bean</span></div><div><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@LoadBalanced</span></div><div>RestTemplate restTemplate() {</div><div><span style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> <span style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> RestTemplate();</div><div>}</div><div><br/></div><div>}</div></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">1</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">2</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">3</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">4</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">5</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">6</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">7</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">8</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">9</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">10</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">11</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">12</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">13</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">14</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">15</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">16</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">17</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">改造HelloService类，在hiService方法上加上@HystrixCommand注解。该注解对该方法创建了熔断器的功能，并指定了fallbackMethod熔断方法，熔断方法直接返回了一个字符串，字符串为”hi,”+name+”,sorry,error!”，代码如下：</span></div><div style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em; line-height: 23.8px; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="padding: 0px; background: transparent; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: 12.6px; white-space: pre; border-radius: 0px; overflow-x: auto; word-wrap: normal;"><div><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@Service</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">class</span> <span style="box-sizing: border-box; color: rgb(102, 0, 102);">HelloService</span> <span style="box-sizing: border-box;">{</span></div><div><br/></div><div><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@Autowired</span></div><div>RestTemplate restTemplate;</div><div><br/></div><div><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@HystrixCommand</span>(fallbackMethod = <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;hiError&quot;</span>)</div><div><span style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> String <span style="box-sizing: border-box;">hiService</span>(String name) {</div><div><span style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> restTemplate.getForObject(<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;<a href="http://service-hi/hi?name=">http://SERVICE-HI/hi?name=</a>&quot;</span>+name,String.class);</div><div>}</div><div><br/></div><div><span style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> String <span style="box-sizing: border-box;">hiError</span>(String name) {</div><div><span style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;hi,&quot;</span>+name+<span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;,sorry,error!&quot;</span>;</div><div>}</div><div>}</div><div><br/></div></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">1</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">2</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">3</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">4</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">5</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">6</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">7</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">8</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">9</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">10</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">11</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">12</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">13</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">14</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">15</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">16</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">17</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">启动：service-ribbon 工程，当我们访问</span><a href="http://localhost:8764/hi?name=forezp" style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">http://localhost:8764/hi?name=forezp</a><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">,浏览器显示：</span></div><blockquote style="box-sizing: border-box; margin: 0px 0px 1.7em; line-height: 27.2px; padding: 15px 20px; border-left: 10px solid rgba(128, 128, 128, 0.075); background-color: rgba(128, 128, 128, 0.05); border-radius: 0px 5px 5px 0px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px; padding: 0px; box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;"><span style="box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;">hi forezp,i am from port:8762</span></div></blockquote><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">此时关闭 service-hi 工程，当我们再访问</span><a href="http://localhost:8764/hi?name=forezp" style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">http://localhost:8764/hi?name=forezp</a><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">，浏览器会显示：</span></div><blockquote style="box-sizing: border-box; margin: 0px 0px 1.7em; line-height: 27.2px; padding: 15px 20px; border-left: 10px solid rgba(128, 128, 128, 0.075); background-color: rgba(128, 128, 128, 0.05); border-radius: 0px 5px 5px 0px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px; padding: 0px; box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;"><span style="box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;">hi ,forezp,orry,error!</span></div></blockquote><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">这就说明当 service-hi 工程不可用的时候，service-ribbon调用 service-hi的API接口时，会执行快速失败，直接返回一组字符串，而不是等待响应超时，这很好的控制了容器的线程阻塞。</span></div><h3 style="margin: 0.8em 0px; padding: 0px; box-sizing: border-box; font-family: &quot;microsoft yahei&quot;; line-height: 1.1; color: rgb(63, 63, 63); text-align: start; font-size: 1.7em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-family: &quot;microsoft yahei&quot;; line-height: 1.1; color: rgb(63, 63, 63); font-size: 1.7em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">四、Feign中使用断路器</span></h3><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Feign是自带断路器的，在D版本的Spring Cloud中，它没有默认打开。需要在配置文件中配置打开它，在配置文件加以下代码：</span></div><blockquote style="box-sizing: border-box; margin: 0px 0px 1.7em; line-height: 27.2px; padding: 15px 20px; border-left: 10px solid rgba(128, 128, 128, 0.075); background-color: rgba(128, 128, 128, 0.05); border-radius: 0px 5px 5px 0px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px; padding: 0px; box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;"><span style="box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;">feign.hystrix.enabled=true</span></div></blockquote><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">基于service-feign工程进行改造，只需要在FeignClient的SchedualServiceHi接口的注解中加上fallback的指定类就行了：</span></div><div style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em; line-height: 23.8px; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="padding: 0px; background: transparent; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: 12.6px; white-space: pre; border-radius: 0px; overflow-x: auto; word-wrap: normal;"><div>@FeignClient(<span style="color: rgb(0, 0, 136); box-sizing: border-box;">value</span> = <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;service-hi&quot;</span>,fallback = SchedualServiceHiHystric.class)</div><div><span style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span style="color: rgb(0, 0, 136); box-sizing: border-box;">interface</span> SchedualServiceHi {</div><div>@RequestMapping(<span style="color: rgb(0, 0, 136); box-sizing: border-box;">value</span> = <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;/hi&quot;</span>,method = RequestMethod.GET)</div><div>String sayHiFromClientOne(@RequestParam(<span style="color: rgb(0, 0, 136); box-sizing: border-box;">value</span> = <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;name&quot;</span>) String name);</div><div>}</div></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">1</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">2</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">3</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">4</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">5</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">6</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">SchedualServiceHiHystric需要实现SchedualServiceHi 接口，并注入到Ioc容器中，代码如下：</span></div><div style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em; line-height: 23.8px; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="padding: 0px; background: transparent; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: 12.6px; white-space: pre; border-radius: 0px; overflow-x: auto; word-wrap: normal;"><div><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@Component</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">class</span> <span style="box-sizing: border-box; color: rgb(102, 0, 102);">SchedualServiceHiHystric</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">implements</span> <span style="box-sizing: border-box; color: rgb(102, 0, 102);">SchedualServiceHi</span> <span style="box-sizing: border-box;">{</span></div><div><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@Override</span></div><div><span style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> String <span style="box-sizing: border-box;">sayHiFromClientOne</span>(String name) {</div><div><span style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> <span style="color: rgb(0, 136, 0); box-sizing: border-box;">&quot;sorry &quot;</span>+name;</div><div>}</div><div>}</div></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">1</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">2</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">3</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">4</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">5</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">6</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">7</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">8</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">启动四servcie-feign工程，浏览器打开</span><a href="http://localhost:8765/hi?name=forezp" style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">http://localhost:8765/hi?name=forezp</a><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">,注意此时service-hi工程没有启动，网页显示：</span></div><blockquote style="box-sizing: border-box; margin: 0px 0px 1.7em; line-height: 27.2px; padding: 15px 20px; border-left: 10px solid rgba(128, 128, 128, 0.075); background-color: rgba(128, 128, 128, 0.05); border-radius: 0px 5px 5px 0px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px; padding: 0px; box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;"><span style="box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;">sorry forezp</span></div></blockquote><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">打开service-hi工程，再次访问，浏览器显示：</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">&gt;</span></div><blockquote style="box-sizing: border-box; margin: 0px 0px 1.7em; line-height: 27.2px; padding: 15px 20px; border-left: 10px solid rgba(128, 128, 128, 0.075); background-color: rgba(128, 128, 128, 0.05); border-radius: 0px 5px 5px 0px; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="margin: 0px; padding: 0px; box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;"><span style="box-sizing: border-box; line-height: 1.5; font-size: 1em; color: rgb(111, 111, 111); word-wrap: break-word; word-break: normal;">hi forezp,i am from port:8762</span></div></blockquote><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">这证明断路器起到作用了。</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">五、Hystrix Dashboard (断路器：Hystrix 仪表盘)</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">基于service-ribbon 改造，Feign的改造和这一样。</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">首选在pom.xml引入spring-cloud-starter-hystrix-dashboard的起步依赖：</span></div><div style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em; line-height: 23.8px; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="padding: 0px; background: transparent; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: 12.6px; white-space: pre; border-radius: 0px; overflow-x: auto; word-wrap: normal;"><div><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">dependency</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span></div><div><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">groupId</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span>org.springframework.boot<span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">groupId</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span></div><div><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">artifactId</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span>spring-boot-starter-actuator<span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">artifactId</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span></div><div><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">dependency</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span></div><div><br/></div><div><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">dependency</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span></div><div><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">groupId</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span>org.springframework.cloud<span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">groupId</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span></div><div><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">artifactId</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span>spring-cloud-starter-hystrix-dashboard<span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">artifactId</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span></div><div><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">dependency</span><span style="color: rgb(0, 102, 102); box-sizing: border-box;">&gt;</span></div></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">1</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">2</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">3</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">4</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">5</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">6</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">7</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">8</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">9</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">10</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">在主程序启动类中加入@EnableHystrixDashboard注解，开启hystrixDashboard：</span></div><div style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin: 0px 0px 1.7em; line-height: 23.8px; font-family: &quot;Source Code Pro&quot;, monospace; padding: 5px 5px 5px 60px; font-size: 14px; word-break: break-all; color: rgb(51, 51, 51); background-color: rgba(128, 128, 128, 0.05); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><div style="padding: 0px; background: transparent; box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; font-size: 12.6px; white-space: pre; border-radius: 0px; overflow-x: auto; word-wrap: normal;"><div><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@SpringBootApplication</span><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@EnableDiscoveryClient</span><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@EnableHystrix</span><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@EnableHystrixDashboard</span><span style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span style="box-sizing: border-box; color: rgb(0, 0, 136);">class</span> <span style="box-sizing: border-box; color: rgb(102, 0, 102);">ServiceRibbonApplication</span> <span style="box-sizing: border-box;">{</span></div><div><br/></div><div><span style="color: rgb(0, 0, 136); box-sizing: border-box;">public</span> <span style="color: rgb(0, 0, 136); box-sizing: border-box;">static</span> <span style="color: rgb(0, 0, 136); box-sizing: border-box;">void</span> <span style="box-sizing: border-box;">main</span>(String[] args) {</div><div>SpringApplication.run(ServiceRibbonApplication.class, args);</div><div>}</div><div><br/></div><div><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@Bean</span></div><div><span style="color: rgb(155, 133, 157); box-sizing: border-box;">@LoadBalanced</span></div><div>RestTemplate restTemplate() {</div><div><span style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> <span style="color: rgb(0, 0, 136); box-sizing: border-box;">new</span> RestTemplate();</div><div>}</div><div><br/></div><div>}</div></div></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">1</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">2</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">3</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">4</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">5</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">6</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">7</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">8</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">9</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">10</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">11</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">12</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">13</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">14</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">15</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">16</span></div><div style="box-sizing: border-box; padding: 0px 5px; list-style: none; margin-left: 0px;"><span style="box-sizing: border-box;">17</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">打开浏览器：访问</span><a href="http://localhost:8764/hystrix" style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">http://localhost:8764/hystrix</a><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">,界面如下：</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="史上最简单的SpringCloud教程  第四篇断路器（Hystrix）_files/Image [2].png" type="image/png" data-filename="Image.png" style="border: none; box-sizing: border-box; margin-top: 15px; margin-bottom: 15px; max-width: 602px; max-height: 100%; height: auto;"/></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">点击monitor stream，进入下一个界面，访问：</span><a href="http://localhost:8764/hi?name=forezp" style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">http://localhost:8764/hi?name=forezp</a></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">此时会出现监控界面：</span></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="史上最简单的SpringCloud教程  第四篇断路器（Hystrix）_files/Image [3].png" type="image/png" data-filename="Image.png" style="border: none; box-sizing: border-box; margin-top: 15px; margin-bottom: 15px; max-width: 602px; max-height: 100%; height: auto;"/></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>本文源码下载： </div><div style="margin-top: 1em; margin-bottom: 1em;"><a href="https://github.com/forezp/SpringCloudLearning/tree/master/chapter4" style="box-sizing: border-box; color: rgb(12, 137, 207);-en-paragraph:true;">https://github.com/forezp/SpringCloudLearning/tree/master/chapter4</a></div></div><h3 style="margin: 0.8em 0px; padding: 0px; box-sizing: border-box; font-family: &quot;microsoft yahei&quot;; line-height: 1.1; color: rgb(63, 63, 63); text-align: start; font-size: 1.7em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-family: &quot;microsoft yahei&quot;; line-height: 1.1; color: rgb(63, 63, 63); font-size: 1.7em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">六、参考资料</span></h3><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><a href="http://projects.spring.io/spring-cloud/spring-cloud.html#_circuit_breaker_hystrix_clients" style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">circuit_breaker_hystrix</a></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><a href="http://projects.spring.io/spring-cloud/spring-cloud.html#spring-cloud-feign-hystrix" style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">feign-hystrix</a></div><div style="margin: 0px 0px 1.7em; padding: 0px; box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><a href="http://projects.spring.io/spring-cloud/spring-cloud.html#_circuit_breaker_hystrix_dashboard" style="box-sizing: border-box; line-height: 27.2px; word-wrap: break-word; word-break: normal; color: rgb(12, 137, 207); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">hystrix_dashboard</a></div><h3 style="margin: 0.8em 0px; padding: 0px; box-sizing: border-box; font-family: &quot;microsoft yahei&quot;; line-height: 1.1; color: rgb(63, 63, 63); text-align: start; font-size: 1.7em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="box-sizing: border-box; font-family: &quot;microsoft yahei&quot;; line-height: 1.1; color: rgb(63, 63, 63); font-size: 1.7em; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">优秀文章推荐：</span></h3><ul style="box-sizing: border-box; line-height: 27.2px; margin-bottom: 1.7em; color: rgb(63, 63, 63); font-family: &quot;microsoft yahei&quot;; font-size: 16px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box;"><a href="http://blog.csdn.net/forezp/article/details/70148833" style="box-sizing: border-box; color: rgb(12, 137, 207);">史上最简单的 SpringCloud 教程 | 终章</a></li><li style="box-sizing: border-box;"><a href="http://blog.csdn.net/forezp/article/details/69696915" style="box-sizing: border-box; color: rgb(12, 137, 207);">史上最简单的 SpringCloud 教程 | 第一篇: 服务的注册与发现（Eureka）</a></li><li style="box-sizing: border-box;"><a href="http://blog.csdn.net/forezp/article/details/70037513" style="box-sizing: border-box; color: rgb(12, 137, 207);">史上最简单的SpringCloud教程 | 第七篇: 高可用的分布式配置中心(Spring Cloud Config)</a></li></ul><div><br/></div></div></span>
</div></body></html> 