<html>
<head>
  <title>LockSupport的理解与应用</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/306387 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1601"/>
<h1>LockSupport的理解与应用</h1>

<div>
<span><div><h2 style="margin: 15px 0px; padding: 10px 5px; font-size: 20px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; font-family: 宋体, Calibri; color: white; border-top-left-radius: 4px; border-top-right-radius: 4px; box-shadow: rgb(44, 219, 135) 0px 0px 0px 1px, rgba(10, 10, 0, 0.5) 1px 1px 6px 1px; text-shadow: rgb(34, 34, 34) 2px 2px 3px;"><span style="font-size: 20px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; font-family: 宋体, Calibri; color: white; border-top-left-radius: 4px; border-top-right-radius: 4px; box-shadow: rgb(44, 219, 135) 0px 0px 0px 1px, rgba(10, 10, 0, 0.5) 1px 1px 6px 1px; text-shadow: rgb(34, 34, 34) 2px 2px 3px;">LockSupport</span></h2><div style="margin: 0px 0px 18px; padding: 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);"><span style="font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);">AQS使用LockSupport这个工具类来完成<span style="font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);">阻塞或者唤醒一个线程的工作</span><span style="font-family: punctuation; font-size: 11pt; color: rgb(85, 85, 85);"> </span>。</span></div><blockquote style="margin: 10px 0px; padding: 15px 15px 2px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; font-size: 16px; border-left: 15px solid rgb(199, 108, 12); color: rgb(199, 108, 12); position: relative; font-family: Georgia, serif; text-align: justify; box-shadow: rgb(204, 204, 204) 2px 2px 15px; font-weight: bold;"><div style="margin: 0px 0px 10px; padding: 0px; box-sizing: border-box; word-wrap: break-word; text-indent: 30px;"><span style="box-sizing: border-box; word-wrap: break-word; text-indent: 30px;">LockSupport是用来创建锁和其他同步类的基本线程阻塞原语</span></div></blockquote><div style="margin: 0px 0px 18px; padding: 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);"><span style="font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);">每个使用LockSupport的线程都会与一个许可关联，如果该许可可用，并且可在进程中使用，则调用park()将会立即返回，否则可能阻塞。如果许可尚不可用，则可以调用 unpark 使其可用。但是注意许可不可重入，也就是说只能调用一次park()方法，否则会一直阻塞。</span></div><div style="margin: 0px 0px 18px; padding: 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);"><span style="font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);">LockSupport定义了一系列以park开头的方法来阻塞当前线程，unpark(Thread thread)方法来唤醒一个被阻塞的线程。如下：</span></div><div style="margin: 0px 0px 18px; padding: 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);"><img src="LockSupport的理解与应用_files/Image.png" type="image/png" data-filename="Image.png" style="font-family: punctuation; font-size: 11pt; color: rgb(85, 85, 85);"/><br/></div><div style="margin: 0px 0px 18px; padding: 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);"><span style="font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);">park(Object blocker)方法的blocker参数，主要是用来标识当前线程在等待的对象，该对象主要用于问题排查和系统监控。</span></div><div style="margin: 0px 0px 18px; padding: 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);"><span style="font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);">park方法和unpark(Thread thread)都是成对出现的，同时unpark必须要在park执行之后执行，当然并不是说没有不调用unpark线程就会一直阻塞，park有一个方法，它带了时间戳（parkNanos(long nanos)：为了线程调度禁用当前线程，最多等待指定的等待时间，除非许可可用）。</span></div><div style="margin: 0px 0px 18px; padding: 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);"><span style="font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);">park()方法的源码如下：</span></div><div style="margin: 0px 0px 18px; padding: 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);"><br/></div><div style="margin: 0px 0px 18px; padding: 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">/**</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * Basic thread blocking primitives for creating locks and other</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * synchronization classes.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">This class associates, with each thread that uses it, a permit</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * (in the sense of the</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@link java.util.concurrent.Semaphore</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;"> * Semaphore}</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">class). A call to {@code park} will return immediately</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * if the permit is available, consuming it in the process; otherwise</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * it</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;em&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">may</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/em&gt;</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">block.  A call to {@code unpark} makes the permit</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * available, if it was not already available. (Unlike with Semaphores</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * though, permits do not accumulate. There is at most one.)</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Methods {@code park} and {@code unpark} provide efficient</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * means of blocking and unblocking threads that do not encounter the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * problems that cause the deprecated methods {@code Thread.suspend}</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * and {@code Thread.resume} to be unusable for such purposes: Races</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * between one thread invoking {@code park} and another thread trying</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * to {@code unpark} it will preserve liveness, due to the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * permit. Additionally, {@code park} will return if the caller's</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * thread was interrupted, and timeout versions are supported. The</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * {@code park} method may also return at any other time, for &quot;no</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * reason&quot;, so in general must be invoked within a loop that rechecks</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * conditions upon return. In this sense {@code park} serves as an</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * optimization of a &quot;busy wait&quot; that does not waste as much time</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * spinning, but must be paired with an {@code unpark} to be</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * effective.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">The three forms of {@code park} each also support a</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * {@code blocker} object parameter. This object is recorded while</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * the thread is blocked to permit monitoring and diagnostic tools to</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * identify the reasons that threads are blocked. (Such tools may</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * access blockers using method</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@link #getBlocker(Thread)}</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">.)</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * The use of these forms rather than the original forms without this</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * parameter is strongly encouraged. The normal argument to supply as</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * a {@code blocker} within a lock implementation is {@code this}.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">These methods are designed to be used as tools for creating</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * higher</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">-</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">level synchronization utilities, and are not in themselves</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * useful for most concurrency control applications.  The {@code park}</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * method is designed for use only in constructions of the form:</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;pre&gt;</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">{@code</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * while (!canProceed()) { ... LockSupport.park(this); }}</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/pre&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * where neither {@code canProceed} nor any other actions prior to the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * call to {@code park} entail locking or blocking.  Because only one</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * permit is associated with each thread, any intermediary uses of</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * {@code park} could interfere with its intended effects.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;&lt;b&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Sample Usage.</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/b&gt;</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Here is a sketch of a first</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">-</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">in</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">-</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">first</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">-</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">out</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * non</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">-</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">reentrant lock class:</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;pre&gt;</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">{@code</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * class FIFOMutex {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *   private final AtomicBoolean locked = new AtomicBoolean(false);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *   private final Queue&lt;Thread&gt; waiters</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *     = new ConcurrentLinkedQueue&lt;Thread&gt;();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *   public void lock() {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *     boolean wasInterrupted = false;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *     Thread current = Thread.currentThread();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *     waiters.add(current);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *     // Block while not first in queue or cannot acquire lock</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *     while (waiters.peek() != current ||</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *            !<a href="http://locked.compareandset(false/">locked.compareAndSet(false</a>, true)) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *       LockSupport.park(this);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *       if (Thread.interrupted()) // ignore interrupts while waiting</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *         wasInterrupted = true;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *     }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *     waiters.remove();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *     if (wasInterrupted)          // reassert interrupt status on exit</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *       current.interrupt();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *   }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *   public void unlock() {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *     locked.set(false);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *     LockSupport.unpark(waiters.peek());</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> *   }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> * }}</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/pre&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;"> */</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">class</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">LockSupport {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">private</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">LockSupport() {}</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">// Cannot be instantiated.</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">private</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">setBlocker(Thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">, Object</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">arg</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">// Even though volatile, hotspot doesn't need a write barrier here.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.putObject(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">parkBlockerOffset</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">arg</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">/**</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * Makes available the permit for the given thread, if it</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * was not already available.  If the thread was blocked on</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * {@code park} then it will unblock.  Otherwise, its next call</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * to {@code park} is guaranteed not to block. This operation</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * is not guaranteed to have any effect at all if the given</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * thread has not been started.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@param</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">thread the thread to unpark, or {@code null}, in which case</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *        this operation has no effect</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     */</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">unpark(Thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">thread</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">if</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">thread</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">!=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">null</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">)</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.unpark(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">thread</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">/**</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * Disables the current thread for thread scheduling purposes unless the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * permit is available.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">If the permit is available then it is consumed and the call returns</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * immediately; otherwise</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the current thread becomes disabled for thread scheduling</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * purposes and lies dormant until one of three things happens:</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;ul&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Some other thread invokes</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@link #unpark unpark}</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">with the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * current thread as the target; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Some other thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@linkplain Thread#interrupt interrupts}</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the current thread; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">The call spuriously (that is, for no reason) returns.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/ul&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">This method does</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;em&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">not</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/em&gt;</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">report which of these caused the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * method to return. Callers should re</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">-</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">check the conditions which caused</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the thread to park in the first place. Callers may also determine,</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * for example, the interrupt status of the thread upon return.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@param</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">blocker the synchronization object responsible for this</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *        thread parking</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@since</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">1.6</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     */</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">park(Object</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">blocker</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">        Thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">= Thread.</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">currentThread</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">setBlocker</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">blocker</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.park(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">false</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">, 0L);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">setBlocker</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">null</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">/**</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * Disables the current thread for thread scheduling purposes, for up to</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the specified waiting time, unless the permit is available.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">If the permit is available then it is consumed and the call</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * returns immediately; otherwise the current thread becomes disabled</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * for thread scheduling purposes and lies dormant until one of four</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * things happens:</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;ul&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Some other thread invokes</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@link #unpark unpark}</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">with the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * current thread as the target; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Some other thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@linkplain Thread#interrupt interrupts}</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the current thread; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">The specified waiting time elapses; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">The call spuriously (that is, for no reason) returns.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/ul&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">This method does</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;em&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">not</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/em&gt;</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">report which of these caused the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * method to return. Callers should re</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">-</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">check the conditions which caused</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the thread to park in the first place. Callers may also determine,</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * for example, the interrupt status of the thread, or the elapsed time</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * upon return.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@param</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">blocker the synchronization object responsible for this</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *        thread parking</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@param</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">nanos the maximum number of nanoseconds to wait</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@since</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">1.6</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     */</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">parkNanos(Object</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">blocker</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">long</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">nanos</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">if</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">nanos</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">&gt; 0) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">            Thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">= Thread.</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">currentThread</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">setBlocker</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">blocker</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.park(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">false</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">nanos</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">setBlocker</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">null</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">        }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">/**</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * Disables the current thread for thread scheduling purposes, until</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the specified deadline, unless the permit is available.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">If the permit is available then it is consumed and the call</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * returns immediately; otherwise the current thread becomes disabled</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * for thread scheduling purposes and lies dormant until one of four</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * things happens:</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;ul&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Some other thread invokes</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@link #unpark unpark}</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">with the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * current thread as the target; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Some other thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@linkplain Thread#interrupt interrupts}</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * current thread; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">The specified deadline passes; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">The call spuriously (that is, for no reason) returns.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/ul&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">This method does</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;em&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">not</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/em&gt;</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">report which of these caused the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * method to return. Callers should re</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">-</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">check the conditions which caused</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the thread to park in the first place. Callers may also determine,</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * for example, the interrupt status of the thread, or the current time</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * upon return.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@param</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">blocker the synchronization object responsible for this</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *        thread parking</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@param</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">deadline the absolute time, in milliseconds from the Epoch,</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *        to wait until</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@since</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">1.6</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     */</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">parkUntil(Object</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">blocker</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">long</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">deadline</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">        Thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">= Thread.</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">currentThread</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">setBlocker</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">blocker</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.park(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">true</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">deadline</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">setBlocker</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">null</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">/**</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * Returns the blocker object supplied to the most recent</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * invocation of a park method that has not yet unblocked, or null</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * if not blocked.  The value returned is just a momentary</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * snapshot</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">--</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">the thread may have since unblocked or blocked on a</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * different blocker object.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@param</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">t the thread</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@return</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">the blocker</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@throws</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">NullPointerException if argument is null</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@since</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">1.6</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     */</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">Object getBlocker(Thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">if</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">==</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">null</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">)</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">throw</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">new</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">NullPointerException();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">return</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.getObjectVolatile(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">parkBlockerOffset</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">/**</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * Disables the current thread for thread scheduling purposes unless the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * permit is available.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">If the permit is available then it is consumed and the call</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * returns immediately; otherwise the current thread becomes disabled</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * for thread scheduling purposes and lies dormant until one of three</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * things happens:</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;ul&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Some other thread invokes</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@link #unpark unpark}</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">with the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * current thread as the target; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Some other thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@linkplain Thread#interrupt interrupts}</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the current thread; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">The call spuriously (that is, for no reason) returns.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/ul&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">This method does</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;em&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">not</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/em&gt;</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">report which of these caused the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * method to return. Callers should re</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">-</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">check the conditions which caused</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the thread to park in the first place. Callers may also determine,</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * for example, the interrupt status of the thread upon return.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     */</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">park() {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.park(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">false</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">, 0L);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">/**</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * Disables the current thread for thread scheduling purposes, for up to</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the specified waiting time, unless the permit is available.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">If the permit is available then it is consumed and the call</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * returns immediately; otherwise the current thread becomes disabled</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * for thread scheduling purposes and lies dormant until one of four</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * things happens:</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;ul&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Some other thread invokes</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@link #unpark unpark}</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">with the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * current thread as the target; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Some other thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@linkplain Thread#interrupt interrupts}</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the current thread; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">The specified waiting time elapses; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">The call spuriously (that is, for no reason) returns.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/ul&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">This method does</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;em&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">not</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/em&gt;</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">report which of these caused the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * method to return. Callers should re</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">-</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">check the conditions which caused</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the thread to park in the first place. Callers may also determine,</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * for example, the interrupt status of the thread, or the elapsed time</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * upon return.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@param</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">nanos the maximum number of nanoseconds to wait</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     */</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">parkNanos(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">long</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">nanos</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">if</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">nanos</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">&gt; 0)</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.park(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">false</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">nanos</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">/**</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * Disables the current thread for thread scheduling purposes, until</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the specified deadline, unless the permit is available.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">If the permit is available then it is consumed and the call</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * returns immediately; otherwise the current thread becomes disabled</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * for thread scheduling purposes and lies dormant until one of four</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * things happens:</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;ul&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Some other thread invokes</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@link #unpark unpark}</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">with the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * current thread as the target; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">Some other thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 63, 191); font-size: 10pt;">{@linkplain Thread#interrupt interrupts}</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the current thread; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">The specified deadline passes; or</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;li&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">The call spuriously (that is, for no reason) returns.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/ul&gt;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;p&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">This method does</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;em&gt;</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">not</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">&lt;/em&gt;</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">report which of these caused the</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * method to return. Callers should re</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">-</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">check the conditions which caused</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * the thread to park in the first place. Callers may also determine,</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * for example, the interrupt status of the thread, or the current time</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * upon return.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 159, 191); font-size: 10pt; font-weight: bold;">@param</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">deadline the absolute time, in milliseconds from the Epoch,</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     *        to wait until</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     */</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">public</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">void</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">parkUntil(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">long</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">deadline</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.park(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">true</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">deadline</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">/**</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * Returns the pseudo</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 127, 159); font-size: 10pt;">-</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">randomly initialized or updated secondary seed.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     * Copied from ThreadLocalRandom due to package access restrictions.</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 10pt;">     */</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">final</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">int</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">nextSecondarySeed() {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">int</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">r</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">        Thread</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">= Thread.</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">currentThread</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">if</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">((</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">r</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.getInt(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">SECONDARY</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">)) != 0) {</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">r</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">^=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">r</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">&lt;&lt; 13;  </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">// xorshift</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">r</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">^=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">r</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">&gt;&gt;&gt; 17;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">r</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">^=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">r</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">&lt;&lt; 5;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">        }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">else</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">if</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">((</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">r</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">= java.util.concurrent.ThreadLocalRandom.</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">current</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">().nextInt()) == 0)</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">r</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">= 1;</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">// avoid zero</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.putInt(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">t</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">SECONDARY</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">,</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">r</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">);</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">return</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">r</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(63, 127, 95); font-size: 10pt;">// Hotspot implementation via intrinsics API</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">private</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">final</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">sun.misc.Unsafe</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">private</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">final</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">long</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">parkBlockerOffset</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">private</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">final</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">long</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">SEED</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">private</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">final</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">long</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">PROBE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">private</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">final</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">long</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">SECONDARY</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">   </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">static</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">{</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">       </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">try</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">{</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">= sun.misc.Unsafe.</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; font-style: italic; color: rgb(51, 51, 51);">getUnsafe</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">();</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">            Class&lt;?&gt;</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">tk</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">= Thread.</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">class</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">;</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">parkBlockerOffset</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.objectFieldOffset</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">                (</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">tk</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.getDeclaredField(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 10pt;">&quot;parkBlocker&quot;</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">));</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">SEED</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.objectFieldOffset</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">                (</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">tk</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.getDeclaredField(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 10pt;">&quot;threadLocalRandomSeed&quot;</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">));</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">PROBE</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.objectFieldOffset</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">                (</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">tk</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.getDeclaredField(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 10pt;">&quot;threadLocalRandomProbe&quot;</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">));</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">           </span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">SECONDARY</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">=</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(0, 0, 192); font-size: 10pt; font-weight: bold; font-style: italic;">UNSAFE</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.objectFieldOffset</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">                (</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">tk</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">.getDeclaredField(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 10pt;">&quot;threadLocalRandomSecondarySeed&quot;</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">));</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">        }</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">catch</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">(Exception</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">ex</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">) {</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">throw</span> <span style="min-height: 11pt; font-family: Consolas; color: rgb(127, 0, 85); font-size: 10pt; font-weight: bold;">new</span> <span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">Error(</span><span style="min-height: 11pt; font-family: Consolas; color: rgb(106, 62, 62); font-size: 10pt;">ex</span><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">); }</span></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">    }</span></div><div style="min-height: 11pt;"></div><div style="min-height: 11pt;"><span style="min-height: 11pt; font-family: Consolas; font-size: 10pt; color: rgb(51, 51, 51);">}</span></div></div><br/></div><div style="margin: 0px 0px 18px; padding: 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);"><span style="font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);"><br/></span><br/></div><div>        </div><div style="margin: 0px 0px 18px; padding: 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);"><span style="font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; word-wrap: break-word; text-indent: 30px; color: rgb(85, 85, 85);">两个都是native本地方法。Unsafe 是一个比较危险的类，主要是用于执行低级别、不安全的方法集合。尽管这个类和所有的方法都是公开的（public），但是这个类的使用仍然受限，你无法在自己的java程序中直接使用该类，因为只有授信的代码才能获得该类的实例。</span></div><h2 style="margin: 15px 0px; padding: 10px 5px; font-size: 20px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; font-family: 宋体, Calibri; color: white; border-top-left-radius: 4px; border-top-right-radius: 4px; box-shadow: rgb(44, 219, 135) 0px 0px 0px 1px, rgba(10, 10, 0, 0.5) 1px 1px 6px 1px; text-shadow: rgb(34, 34, 34) 2px 2px 3px;"><span style="font-size: 20px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; font-family: 宋体, Calibri; color: white; border-top-left-radius: 4px; border-top-right-radius: 4px; box-shadow: rgb(44, 219, 135) 0px 0px 0px 1px, rgba(10, 10, 0, 0.5) 1px 1px 6px 1px; text-shadow: rgb(34, 34, 34) 2px 2px 3px;">参考资料</span></h2><ol style="margin: 0px 0px 18px 50px; padding: 0px; font-family: punctuation, 微软雅黑, Tohoma; font-size: 14px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); box-sizing: border-box; color: rgb(85, 85, 85);"><li style="margin: 0px 0px 6px 40px; padding: 0px; list-style: decimal; box-sizing: border-box;">方腾飞：《Java并发编程的艺术》</li><li style="margin: 0px 0px 6px 40px; padding: 0px; list-style: decimal; box-sizing: border-box;"><a href="http://www.tuicool.com/articles/MveUNzF" style="color: rgb(255, 94, 82); box-sizing: border-box;">LockSupport的park和unpark的基本使用,以及对线程中断的响应性</a></li></ol><div><br/></div></div></span>
</div></body></html> 